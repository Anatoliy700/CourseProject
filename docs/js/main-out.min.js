"use strict";var _createClass=function(){function a(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,e,s){return e&&a(t.prototype,e),s&&a(t,s),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Basket=function(){function e(t){_classCallCheck(this,e),this.settings=t,this.countGoods=0,this.amount=0,this.basketItems=[],this.$productsWrap=null,this.$elemCounter=$("#"+t.idCountGoods),this.$elemTotalPrice=null}return _createClass(e,[{key:"render",value:function(t){this.$productsWrap=$("<div />",{class:this.settings.classWrapProducts}),this.$elemTotalPrice=$("<span />",{class:this.settings.classTotalValue});var e=$("<div />",{class:this.settings.classWrapPriceTotal}).append($("<span />",{class:this.settings.classTotalDescription,text:"total"})).append(this.$elemTotalPrice),s=$("<div />",{class:this.settings.classWrapButton}).append($("<button />",{class:this.settings.classButtonCheckout,text:"Checkout"})).append($("<button />",{class:this.settings.classButtonGoToCart,text:"Go to cart"}));t.append(this.$productsWrap).append(e).append(s),this.getBasket()}},{key:"getBasket",value:function(){$.ajax({type:"GET",url:this.settings.pathJsonFile,context:this,success:function(t){this.amount=t.amount;var e=!0,s=!1,a=void 0;try{for(var i,r=t.basket[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var n=i.value;this.countGoods+=n.quantity,this.basketItems.push(n)}}catch(t){s=!0,a=t}finally{try{!e&&r.return&&r.return()}finally{if(s)throw a}}this.refresh()},error:function(t){console.log("Произошла ошибка при получении данных",t)},dataType:"json"})}},{key:"add",value:function(e,t,s,a){var i={id_product:e,price:s,title:t,src:a,quantity:1},r=this.basketItems.findIndex(function(t){return t.id_product===e});-1===r?this.basketItems.push(i):this.basketItems[r].quantity++,this.countGoods++,this.amount+=s,this.refresh()}},{key:"remove",value:function(t){for(var e in this.basketItems)if(this.basketItems[e].id_product===t){this.amount-=this.basketItems[e].price,this.countGoods--,1<this.basketItems[e].quantity?this.basketItems[e].quantity--:this.basketItems.splice(e,1),this.refresh();break}}},{key:"setCounterAndTotalPrice",value:function(){var t=this.countGoods;0<t?this.$elemCounter.text(t).addClass("active"):this.$elemCounter.text("").removeClass("active"),this.$elemTotalPrice.text("$"+this.amount)}},{key:"refresh",value:function(){if(this.setCounterAndTotalPrice(),0===this.basketItems.length)this.$productsWrap.empty().text("Товаров в карзине нет!");else{this.$productsWrap.empty();var t=!0,e=!1,s=void 0;try{for(var a,i=this.basketItems[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var r=a.value;this.$productsWrap.append(new Good(r.id_product,r.title,r.price,r.src,r.quantity).render())}}catch(t){e=!0,s=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw s}}}}}]),e}(),Good=function(){function r(t,e,s,a,i){_classCallCheck(this,r),this.id=t,this.title=e,this.price=s,this.src=a,this.quantity=i}return _createClass(r,[{key:"render",value:function(){return $('<div id="'+this.id+'" class="acc__cart__product">\n                    <div class="acc__cart__product__img">\n                      <img src="'+this.src+'" width="72" height="85" alt="Rebox Zane">\n                    </div>\n                    <div class="acc__cart__product__data">\n                      <span class="product__data_head">'+this.title+'</span>\n                      <span class="product__data_quality">\n                        <i class="fa fa-star" aria-hidden="true"></i>\n                        <i class="fa fa-star" aria-hidden="true"></i>\n                        <i class="fa fa-star" aria-hidden="true"></i>\n                        <i class="fa fa-star" aria-hidden="true"></i>\n                        <i class="fa fa-star quality-white" aria-hidden="true"></i>\n                      </span>\n                      <div class="product__data_calculation">\n                        <span class="product__data_number">'+this.quantity+'</span> x <span class="product__data_price">$'+this.price+'</span>\n                      </div>\n                    </div>\n                    <div class="acc__cart__product__del">\n                      <button data-type="del" data-id="'+this.id+'">\n                        <i class="fa fa-times" aria-hidden="true"></i>\n                      </button>\n                    </div>\n                  </div>')}}]),r}(),basketRun={settings:{classWrapProductItems:"wrap-product-item",classProductItem:"product-item",classProductTitle:"title-item",classProductPrice:"price-val",classProductImage:"product-img",idWrapTopBasket:"wrap-top-basket",basketSettings:{pathJsonFile:"./json/basket_get.json",classWrapProducts:"acc__cart__products-wrap",classWrapPriceTotal:"acc__cart__price-total",classWrapButton:"acc__cart__buttons",classTotalDescription:"price-total_description",classTotalValue:"price-total_value",idTotalValue:"total-top-basket",classButtonCheckout:"buttons_checkout",classButtonGoToCart:"buttons_go-to-cart",idCountGoods:"count-goods"}},$elemWrapTopBasket:null,$ElemDropBasket:null,basket:null,init:function(){var s=this;this.$elemWrapTopBasket=$("#"+this.settings.idWrapTopBasket),this.basket=new Basket(this.settings.basketSettings),this.basket.render(this.$elemWrapTopBasket),this.$elemWrapTopBasket.on("click","button",function(t){var e=$(t.currentTarget);"del"===e.attr("data-type")&&s.basket.remove(parseInt(e.attr("data-id")))});var t=$("."+this.settings.classWrapProductItems);0<!t.length||(t.on("click","button[data-type = add]",function(t){var e=$(t.currentTarget).parents("."+s.settings.classProductItem);s.goodAddToBasket(e),s.showDialog()}),this.droppInit())},goodAddToBasket:function(t){var e,s=[parseInt(t.attr("data-id")),t.find("."+this.settings.classProductTitle).text(),parseInt(t.find("."+this.settings.classProductPrice).text()),t.find("."+this.settings.classProductImage).attr("src")];(e=this.basket).add.apply(e,s)},droppInit:function(){var s=this;this.$ElemDropBasket=$("<div />",{id:"basket"}).appendTo($("body")).append($("<div />",{text:"Для добавления в корзину перетащите суда товар!",class:"dropp-basket-text"})),$(".product-item").draggable({helper:"clone",scope:"good",addClasses:!0,cursorAt:{left:50,top:50},cursor:"pointer",start:function(t,e){e.helper.addClass("ui-drag-activate_good"),s.$ElemDropBasket.addClass("basket-dropp",500)},stop:function(){s.$ElemDropBasket.removeClass("basket-dropp",500)}}),$("#basket").droppable({activeClass:"ui-drag-activate_basket",scope:"good",tolerance:"pointer",drop:function(t,e){s.goodAddToBasket(e.draggable),s.showDialog()}})},showDialog:function(){var t=$("<div />",{text:"Товар добавлен в корзину"}).dialog({appendTo:"body",hide:{effect:"scale",duration:500},position:{my:"center top",at:"center top+50px"},close:function(){return t.remove()}});setTimeout(function(){t.dialog("close")},1e3)}};$(document).ready(function(){return basketRun.init()});var Comment=function(){function a(t,e,s){_classCallCheck(this,a),this.text=s,this.id_comment=t,this.name=e,this.classContainer="comment-item",this.className="comment-item_name",this.classMessage="comment-item_message",this.classDelBtn="comment-item_del-btn",this.classApprovelBtn="comment-item_approve-btn"}return _createClass(a,[{key:"render",value:function(t){var e=$("<div />",{class:this.classContainer,"data-id":this.id_comment,"data-approved":!1}),s=$("<p />",{class:this.className,text:this.name}),a=$("<p />",{class:this.classMessage,text:this.text}),i=$("<button />",{class:this.classDelBtn,"data-id":this.id_comment,"data-type":"del",text:"Удалить"}),r=$("<button />",{class:this.classApprovelBtn,"data-id":this.id_comment,"data-type":"app",text:"Одобрить"});e.append(s).append(a).append(i).append(r).appendTo(t)}}]),a}(),settings={idContainer:"container",idCommentBlock:"comment_wrapper",classCommentApproved:"approved",urlGetAllComments:"json/review.list.json",urlDelComment:"json/review.delete.json",urlApprovalComment:"json/review.submit.json",urlAddComment:"json/review.add.json"},commentBlock={settings:settings,$elCommentBlock:null,arrAllComments:[],init:function(){var e=this;this.$elCommentBlock=$("#"+this.settings.idCommentBlock),$("#"+this.settings.idContainer).on("click","button",function(t){return e.btnClickHandler(t)}),this.ajax({url:this.settings.urlGetAllComments,data:"",success:function(t){t.result&&0===t.result?console.error("Ошибка! Ответ от сервера: "+t.error_message):(e.arrAllComments=t.comments,e.render())}})},render:function(){if(0<this.arrAllComments.length){var t=!0,e=!1,s=void 0;try{for(var a,i=this.arrAllComments[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var r=a.value;new Comment(r.id_comment,r.name,r.text).render(this.$elCommentBlock)}}catch(t){e=!0,s=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw s}}}},btnClickHandler:function(t){"del"===t.target.dataset.type?this.remove(t.target):"app"===t.target.dataset.type?this.approve(t.target):"add"===t.target.dataset.type&&(t.preventDefault(),this.add(t.target))},approve:function(i){var r=this;this.ajax({url:this.settings.urlApprovalComment,data:{id_comment:i.dataset.id},success:function(t){var e,s,a;s=i,a=r,(e=t).result&&1===e.result?($(s).parent(".comment-item").addClass(a.settings.classCommentApproved).attr("data-approved",!0),$(s).remove()):0===e.result&&alert("Сервер вернул ошибку: "+e.error_message)}})},remove:function(a){this.ajax({url:this.settings.urlDelComment,data:{id_comment:a.dataset.id},success:function(t){var e,s;s=a,(e=t).result&&1===e.result?$(s).parent(".comment-item").remove():0===e.result&&alert("Сервер вернул ошибку: "+e.error_message)}})},add:function(t){var i=this;if(validateForm){if(!validateForm.startValidate($(t).parents("form")))return;$(t).parents("form").find("."+validateForm.classValidateInput).removeClass(validateForm.classValidateInput)}var r=$(t).siblings("#nameUser"),n=$(t).siblings("#commentUser"),o=r.val(),l=n.val();if(o&&l){var c=Math.floor(100*Math.random()*o.length);this.ajax({url:this.settings.urlAddComment,data:{id_user:c,name:o,text:l},success:function(t){var e,s,a;e=t,s=i.$elCommentBlock,a=i.arrAllComments,e.result&&1===e.result?(new Comment(c,o,l).render(s),a.push({id_comment:c,name:o,text:l}),r.val(""),n.val("")):0===e.result&&alert("Сервер вернул ошибку: "+e.error_message)}})}},ajax:function(t){$.ajax({url:t.url,type:"GET",dataType:"json",data:t.data,success:t.success,error:function(t,e,s){return console.error(e,s)}})}},validateForm={idInputName:"nameUser",idInputPhone:"phone",idInputEmail:"email",idInputMessage:"commentUser",idBtnSubmit:"btnAddComment",classElemOutErr:"error-message",classNoValidateInput:"error-input",classValidateInput:"success-input",errorMessage:{nameUser:"Имя должно содержать только буквы",phone:'Телефон должен быть в формате "+7(000)000-0000"',email:"Не корректный email",commentUser:"Вы забыли написать комментарий"},regExpName:/^[a-zа-яё]{2,}$/i,regExpPhone:/^\+\d\(\d{3}\)\d{3}-\d{4}$/,regExpEmail:/^[a-z0-9-_.]+@[a-z]+.[a-z]{2,4}$/i,regExpMessage:/[\wа-яё]{3,}/,startValidate:function(t){var e=$(t).find("input, textarea"),s=!0,a=!0,i=!1,r=void 0;try{for(var n,o=e[Symbol.iterator]();!(a=(n=o.next()).done);a=!0){var l=n.value;if(l.id!==this.idBtnSubmit)this.validateInput(l)?this.outMessageFailValidate(l,!0):(this.outMessageFailValidate(l),s=!1)}}catch(t){i=!0,r=t}finally{try{!a&&o.return&&o.return()}finally{if(i)throw r}}return s},validateInput:function(t){switch(t.id){case this.idInputName:return this.regExpName.test(t.value.trim());case this.idInputPhone:return this.regExpPhone.test(t.value.trim());case this.idInputEmail:return this.regExpEmail.test(t.value.trim());case this.idInputMessage:return this.regExpMessage.test(t.value.trim())}},outMessageFailValidate:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],s=document.getElementById("error-"+t.id);e?(s&&s.parentElement.removeChild(s),t.classList.remove(this.classNoValidateInput),t.classList.add(this.classValidateInput),t.value=t.value.trim()):(s||((s=document.createElement("div")).id="error-"+t.id,s.classList.add(this.classElemOutErr),t.parentElement.insertBefore(s,t.nextElementSibling)),t.classList.remove(this.classValidateInput),t.classList.add(this.classNoValidateInput),s.innerText="- "+this.errorMessage[t.id],t.value="",$(t).effect("bounce"))}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzLmpzIiwiYmFza2V0L0Jhc2tldC5qcyIsImJhc2tldC9Hb29kLmpzIiwiYmFza2V0L21haW4tYmFza2V0LmpzIiwiY29tbWVudC9Db21tZW50LmpzIiwiY29tbWVudC9jb21tZW50QmxvY2suanMiLCJjb21tZW50L3ZhbGlkYXRlRm9ybS5qcyJdLCJuYW1lcyI6WyJCYXNrZXQiLCJiYXNrZXRTZXR0aW5ncyIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJzZXR0aW5ncyIsImNvdW50R29vZHMiLCJhbW91bnQiLCJiYXNrZXRJdGVtcyIsIiRwcm9kdWN0c1dyYXAiLCIkZWxlbUNvdW50ZXIiLCIkIiwiaWRDb3VudEdvb2RzIiwiJGVsZW1Ub3RhbFByaWNlIiwiJGpRdWVyeUVsZW1lbnQiLCJjbGFzcyIsImNsYXNzV3JhcFByb2R1Y3RzIiwiY2xhc3NUb3RhbFZhbHVlIiwiJHByaWNlVG90YWxXcmFwIiwiY2xhc3NXcmFwUHJpY2VUb3RhbCIsImFwcGVuZCIsImNsYXNzVG90YWxEZXNjcmlwdGlvbiIsInRleHQiLCIkYnV0dG9uc1dyYXAiLCJjbGFzc1dyYXBCdXR0b24iLCJjbGFzc0J1dHRvbkNoZWNrb3V0IiwiY2xhc3NCdXR0b25Hb1RvQ2FydCIsImdldEJhc2tldCIsImFqYXgiLCJ0eXBlIiwidXJsIiwicGF0aEpzb25GaWxlIiwiY29udGV4dCIsInN1Y2Nlc3MiLCJkYXRhIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJ1bmRlZmluZWQiLCJfc3RlcCIsIl9pdGVyYXRvciIsImJhc2tldCIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJpdGVtIiwidmFsdWUiLCJxdWFudGl0eSIsInB1c2giLCJlcnIiLCJyZXR1cm4iLCJyZWZyZXNoIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiZGF0YVR5cGUiLCJpZF9wcm9kdWN0IiwidGl0bGUiLCJwcmljZSIsInNyYyIsImJhc2tldE5ld0l0ZW0iLCJpbmQiLCJmaW5kSW5kZXgiLCJlbGVtIiwiaWRQcm9kdWN0IiwiYXJySW5kIiwic3BsaWNlIiwiY291bnQiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwic2V0Q291bnRlckFuZFRvdGFsUHJpY2UiLCJsZW5ndGgiLCJlbXB0eSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsIkdvb2QiLCJyZW5kZXIiLCJpZCIsImJhc2tldFJ1biIsImNsYXNzV3JhcFByb2R1Y3RJdGVtcyIsImNsYXNzUHJvZHVjdEl0ZW0iLCJjbGFzc1Byb2R1Y3RUaXRsZSIsImNsYXNzUHJvZHVjdFByaWNlIiwiY2xhc3NQcm9kdWN0SW1hZ2UiLCJpZFdyYXBUb3BCYXNrZXQiLCJpZFRvdGFsVmFsdWUiLCIkZWxlbVdyYXBUb3BCYXNrZXQiLCIkRWxlbURyb3BCYXNrZXQiLCJpbml0IiwiX3RoaXMiLCJvbiIsImV2ZW50IiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsImF0dHIiLCJyZW1vdmUiLCJwYXJzZUludCIsIiR3cmFwUHJvZHVjdCIsIiRlbGVtIiwicGFyZW50cyIsImdvb2RBZGRUb0Jhc2tldCIsInNob3dEaWFsb2ciLCJkcm9wcEluaXQiLCJfYmFza2V0IiwicGFyYW0iLCJmaW5kIiwiYWRkIiwiYXBwbHkiLCJfdGhpczIiLCJhcHBlbmRUbyIsImRyYWdnYWJsZSIsImhlbHBlciIsInNjb3BlIiwiYWRkQ2xhc3NlcyIsImN1cnNvckF0IiwibGVmdCIsInRvcCIsImN1cnNvciIsInN0YXJ0IiwidWkiLCJzdG9wIiwiZHJvcHBhYmxlIiwiYWN0aXZlQ2xhc3MiLCJ0b2xlcmFuY2UiLCJkcm9wIiwiJGRpYWxvZyIsImRpYWxvZyIsImhpZGUiLCJlZmZlY3QiLCJkdXJhdGlvbiIsInBvc2l0aW9uIiwibXkiLCJhdCIsImNsb3NlIiwic2V0VGltZW91dCIsImRvY3VtZW50IiwicmVhZHkiLCJDb21tZW50IiwiY29tbWVudElkIiwibmFtZSIsIm1lc3NhZ2UiLCJpZF9jb21tZW50IiwiY2xhc3NDb250YWluZXIiLCJjbGFzc05hbWUiLCJjbGFzc01lc3NhZ2UiLCJjbGFzc0RlbEJ0biIsImNsYXNzQXBwcm92ZWxCdG4iLCIkY29udGFpbmVyQ29tbWVudCIsImRhdGEtaWQiLCJkYXRhLWFwcHJvdmVkIiwiJG5hbWVDb21tZW50IiwiJG1lc3NhZ2VDb21tZW50IiwiJGRlbEJ0bkNvbW1lbnQiLCJkYXRhLXR5cGUiLCIkYXBwcm92ZUJ0bkNvbW1lbnQiLCJpZENvbnRhaW5lciIsImlkQ29tbWVudEJsb2NrIiwiY2xhc3NDb21tZW50QXBwcm92ZWQiLCJ1cmxHZXRBbGxDb21tZW50cyIsInVybERlbENvbW1lbnQiLCJ1cmxBcHByb3ZhbENvbW1lbnQiLCJ1cmxBZGRDb21tZW50IiwiY29tbWVudEJsb2NrIiwiJGVsQ29tbWVudEJsb2NrIiwiYXJyQWxsQ29tbWVudHMiLCJfdGhpczMiLCJidG5DbGlja0hhbmRsZXIiLCJyZXN1bHQiLCJlcnJvcl9tZXNzYWdlIiwiY29tbWVudHMiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyIsIl9kaWRJdGVyYXRvckVycm9yMyIsIl9pdGVyYXRvckVycm9yMyIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJvYmoiLCJkYXRhc2V0IiwiYXBwcm92ZSIsInByZXZlbnREZWZhdWx0IiwiX3RoaXM0IiwicGFyZW50IiwiYWxlcnQiLCJfdGhpczUiLCJ2YWxpZGF0ZUZvcm0iLCJzdGFydFZhbGlkYXRlIiwiY2xhc3NWYWxpZGF0ZUlucHV0IiwidXNlck5hbWVJbnB1dCIsInNpYmxpbmdzIiwidXNlck1lc3NhZ2VJbnB1dCIsInVzZXJOYW1lIiwidmFsIiwidXNlck1lc3NhZ2UiLCJ1c2VySWQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJpZF91c2VyIiwiYXJyQ29tbWVudHMiLCJ0ZXh0U3RhdHVzIiwianFYSFIiLCJpZElucHV0TmFtZSIsImlkSW5wdXRQaG9uZSIsImlkSW5wdXRFbWFpbCIsImlkSW5wdXRNZXNzYWdlIiwiaWRCdG5TdWJtaXQiLCJjbGFzc0VsZW1PdXRFcnIiLCJjbGFzc05vVmFsaWRhdGVJbnB1dCIsImVycm9yTWVzc2FnZSIsIm5hbWVVc2VyIiwicGhvbmUiLCJlbWFpbCIsImNvbW1lbnRVc2VyIiwicmVnRXhwTmFtZSIsInJlZ0V4cFBob25lIiwicmVnRXhwRW1haWwiLCJyZWdFeHBNZXNzYWdlIiwiZm9ybSIsImFyciIsInZhbGlkIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjQiLCJfZGlkSXRlcmF0b3JFcnJvcjQiLCJfaXRlcmF0b3JFcnJvcjQiLCJfc3RlcDQiLCJfaXRlcmF0b3I0IiwidmFsaWRhdGVJbnB1dCIsIm91dE1lc3NhZ2VGYWlsVmFsaWRhdGUiLCJ0ZXN0IiwidHJpbSIsInZhbGlkYXRlIiwiYXJndW1lbnRzIiwiZWxlbUVycm9yIiwiZ2V0RWxlbWVudEJ5SWQiLCJwYXJlbnRFbGVtZW50IiwicmVtb3ZlQ2hpbGQiLCJjbGFzc0xpc3QiLCJjcmVhdGVFbGVtZW50IiwiaW5zZXJ0QmVmb3JlIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiaW5uZXJUZXh0Il0sIm1hcHBpbmdzIjoiQUFBQSxpWUNBQUEsa0JBQ0EsU0FBQUEsRUFBQUMsR0FBQUMsZ0JBQUFDLEtBQUFILEdBQ0FHLEtBQUFDLFNBQUFILEVBRUFFLEtBQUFFLFdBQUEsRUFDQUYsS0FBQUcsT0FBQSxFQUNBSCxLQUFBSSxZQUFBLEdBQ0FKLEtBQUFLLGNBQUEsS0FDQUwsS0FBQU0sYUFBQUMsRUFBQUEsSUFBQVQsRUFBQVUsY0FDQVIsS0FBQVMsZ0JBQUEseURBR0FDLEdBQ0FWLEtBQUFLLGNBQUFFLEVBQUEsVUFBQSxDQUNBSSxNQUFBWCxLQUFBQyxTQUFBVyxvQkFHQVosS0FBQVMsZ0JBQUFGLEVBQUEsV0FBQSxDQUNBSSxNQUFBWCxLQUFBQyxTQUFBWSxrQkFHQSxJQUFBQyxFQUFBUCxFQUFBLFVBQUEsQ0FDQUksTUFBQVgsS0FBQUMsU0FB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ZW50IjpbIlwidXNlIHN0cmljdFwiO1xyXG5cclxuIiwiY2xhc3MgQmFza2V0IHtcclxuICBjb25zdHJ1Y3RvcihiYXNrZXRTZXR0aW5ncykge1xyXG4gICAgdGhpcy5zZXR0aW5ncyA9IGJhc2tldFNldHRpbmdzO1xyXG5cclxuICAgIHRoaXMuY291bnRHb29kcyA9IDA7IC8v0J7QsdGJ0LXQtSDQutC+0Lst0LLQviDRgtC+0LLQsNGA0L7QsiDQsiDQutC+0YDQt9C40L3QtVxyXG4gICAgdGhpcy5hbW91bnQgPSAwOyAvL9Ce0LHRidCw0Y8g0YHRgtC+0LjQvNC+0YHRgtGMINGC0L7QstCw0YDQvtCyXHJcbiAgICB0aGlzLmJhc2tldEl0ZW1zID0gW107IC8v0JzQsNGB0YHQuNCyINC00LvRjyDRhdGA0LDQvdC10L3QuNGPINGC0L7QstCw0YDQvtCyXHJcbiAgICB0aGlzLiRwcm9kdWN0c1dyYXAgPSBudWxsO1xyXG4gICAgdGhpcy4kZWxlbUNvdW50ZXIgPSAkKGAjJHtiYXNrZXRTZXR0aW5ncy5pZENvdW50R29vZHN9YCk7XHJcbiAgICB0aGlzLiRlbGVtVG90YWxQcmljZSA9IG51bGw7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoJGpRdWVyeUVsZW1lbnQpIHtcclxuICAgIHRoaXMuJHByb2R1Y3RzV3JhcCA9ICQoJzxkaXYgLz4nLCB7XHJcbiAgICAgIGNsYXNzOiB0aGlzLnNldHRpbmdzLmNsYXNzV3JhcFByb2R1Y3RzLFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy4kZWxlbVRvdGFsUHJpY2UgPSAkKCc8c3BhbiAvPicsIHtcclxuICAgICAgY2xhc3M6IHRoaXMuc2V0dGluZ3MuY2xhc3NUb3RhbFZhbHVlXHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgJHByaWNlVG90YWxXcmFwID0gJCgnPGRpdiAvPicsIHtcclxuICAgICAgY2xhc3M6IHRoaXMuc2V0dGluZ3MuY2xhc3NXcmFwUHJpY2VUb3RhbCxcclxuICAgIH0pLmFwcGVuZCgkKCc8c3BhbiAvPicsIHtcclxuICAgICAgY2xhc3M6IHRoaXMuc2V0dGluZ3MuY2xhc3NUb3RhbERlc2NyaXB0aW9uLFxyXG4gICAgICB0ZXh0OiAndG90YWwnXHJcbiAgICB9KSkuYXBwZW5kKHRoaXMuJGVsZW1Ub3RhbFByaWNlKTtcclxuXHJcbiAgICBsZXQgJGJ1dHRvbnNXcmFwID0gJCgnPGRpdiAvPicsIHtcclxuICAgICAgY2xhc3M6IHRoaXMuc2V0dGluZ3MuY2xhc3NXcmFwQnV0dG9uLFxyXG4gICAgfSkuYXBwZW5kKCQoJzxidXR0b24gLz4nLCB7XHJcbiAgICAgIGNsYXNzOiB0aGlzLnNldHRpbmdzLmNsYXNzQnV0dG9uQ2hlY2tvdXQsXHJcbiAgICAgIHRleHQ6ICdDaGVja291dCdcclxuICAgIH0pKS5hcHBlbmQoJCgnPGJ1dHRvbiAvPicsIHtcclxuICAgICAgY2xhc3M6IHRoaXMuc2V0dGluZ3MuY2xhc3NCdXR0b25Hb1RvQ2FydCxcclxuICAgICAgdGV4dDogJ0dvIHRvIGNhcnQnXHJcbiAgICB9KSk7XHJcblxyXG4gICAgJGpRdWVyeUVsZW1lbnQuYXBwZW5kKHRoaXMuJHByb2R1Y3RzV3JhcClcclxuICAgICAgLmFwcGVuZCgkcHJpY2VUb3RhbFdyYXApXHJcbiAgICAgIC5hcHBlbmQoJGJ1dHRvbnNXcmFwKTtcclxuXHJcblxyXG4gICAgLy/Qn9C+0LvRg9GH0LDQtdC8INGD0LbQtSDQtNC+0LHQsNCy0LvQtdC90L3Ri9C1INCyINC60L7RgNC30LjQvdGDINGC0L7QstCw0YDRi1xyXG4gICAgdGhpcy5nZXRCYXNrZXQoKTtcclxuICAgIC8vICRwcm9kdWN0c1dyYXAuYXBwZW5kKG5ldyBHb29kKCkucmVuZGVyKCkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0QmFza2V0KCkge1xyXG4gICAgLy9sZXQgc2VsZiA9IHRoaXM7XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgdXJsOiB0aGlzLnNldHRpbmdzLnBhdGhKc29uRmlsZSxcclxuICAgICAgY29udGV4dDogdGhpcyxcclxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuXHJcbiAgICAgICAgdGhpcy5hbW91bnQgPSBkYXRhLmFtb3VudDtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBkYXRhLmJhc2tldCkge1xyXG4gICAgICAgICAgdGhpcy5jb3VudEdvb2RzICs9IGl0ZW0ucXVhbnRpdHk7XHJcbiAgICAgICAgICB0aGlzLmJhc2tldEl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICB9XHJcbiAgICAgICxcclxuICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwINC/0YDQuCDQv9C+0LvRg9GH0LXQvdC40Lgg0LTQsNC90L3Ri9GFJywgZXJyb3IpO1xyXG4gICAgICB9LFxyXG4gICAgICBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZChpZF9wcm9kdWN0LCB0aXRsZSwgcHJpY2UsIHNyYykge1xyXG5cclxuICAgIGxldCBiYXNrZXROZXdJdGVtID0ge1xyXG4gICAgICBpZF9wcm9kdWN0LFxyXG4gICAgICBwcmljZSwgLy9wcmljZTogcHJpY2VcclxuICAgICAgdGl0bGUsXHJcbiAgICAgIHNyYyxcclxuICAgICAgcXVhbnRpdHk6IDFcclxuICAgIH07XHJcbiAgICBsZXQgaW5kID0gdGhpcy5iYXNrZXRJdGVtcy5maW5kSW5kZXgoZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgcmV0dXJuIChlbGVtLmlkX3Byb2R1Y3QgPT09IGlkX3Byb2R1Y3QpO1xyXG4gICAgfSk7XHJcbiAgICBpZiAoaW5kID09PSAtMSkge1xyXG4gICAgICB0aGlzLmJhc2tldEl0ZW1zLnB1c2goYmFza2V0TmV3SXRlbSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmJhc2tldEl0ZW1zW2luZF0ucXVhbnRpdHkrKztcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmNvdW50R29vZHMrKztcclxuICAgIHRoaXMuYW1vdW50ICs9IHByaWNlOyAvL3RoaXMuYW1vdW50ID0gdGhpcy5hbW91bnQgKyBwcmljZTtcclxuXHJcbiAgICB0aGlzLnJlZnJlc2goKTsgLy/Qn9C10YDQtdGA0LjRgdC+0LLRi9Cy0LDQtdC8INC60L7RgNC30LjQvdGDXHJcbiAgfVxyXG5cclxuICByZW1vdmUoaWRQcm9kdWN0KSB7XHJcbiAgICBmb3IgKGxldCBhcnJJbmQgaW4gdGhpcy5iYXNrZXRJdGVtcykge1xyXG4gICAgICBpZiAodGhpcy5iYXNrZXRJdGVtc1thcnJJbmRdLmlkX3Byb2R1Y3QgPT09IGlkUHJvZHVjdCkge1xyXG4gICAgICAgIHRoaXMuYW1vdW50IC09IHRoaXMuYmFza2V0SXRlbXNbYXJySW5kXS5wcmljZTtcclxuICAgICAgICB0aGlzLmNvdW50R29vZHMtLTtcclxuICAgICAgICBpZiAodGhpcy5iYXNrZXRJdGVtc1thcnJJbmRdLnF1YW50aXR5ID4gMSkge1xyXG4gICAgICAgICAgdGhpcy5iYXNrZXRJdGVtc1thcnJJbmRdLnF1YW50aXR5LS07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuYmFza2V0SXRlbXMuc3BsaWNlKGFyckluZCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRDb3VudGVyQW5kVG90YWxQcmljZSgpIHtcclxuICAgIGxldCBjb3VudCA9IHRoaXMuY291bnRHb29kcztcclxuICAgIGlmIChjb3VudCA+IDApIHtcclxuICAgICAgdGhpcy4kZWxlbUNvdW50ZXIudGV4dChjb3VudClcclxuICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICB0aGlzLiRlbGVtVG90YWxQcmljZS50ZXh0KCckJyArIHRoaXMuYW1vdW50KTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLiRlbGVtQ291bnRlci50ZXh0KCcnKVxyXG4gICAgICAgIC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIHRoaXMuJGVsZW1Ub3RhbFByaWNlLnRleHQoJyQnICsgdGhpcy5hbW91bnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVmcmVzaCgpIHtcclxuICAgIHRoaXMuc2V0Q291bnRlckFuZFRvdGFsUHJpY2UoKTtcclxuICAgIGlmICh0aGlzLmJhc2tldEl0ZW1zLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICB0aGlzLiRwcm9kdWN0c1dyYXAuZW1wdHkoKVxyXG4gICAgICAgIC50ZXh0KCfQotC+0LLQsNGA0L7QsiDQsiDQutCw0YDQt9C40L3QtSDQvdC10YIhJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLiRwcm9kdWN0c1dyYXAuZW1wdHkoKTtcclxuICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLmJhc2tldEl0ZW1zKSB7XHJcbiAgICAgICAgdGhpcy4kcHJvZHVjdHNXcmFwLmFwcGVuZChuZXcgR29vZChpdGVtLmlkX3Byb2R1Y3QsIGl0ZW0udGl0bGUsIGl0ZW0ucHJpY2UsIGl0ZW0uc3JjLCBpdGVtLnF1YW50aXR5KS5yZW5kZXIoKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0iLCJjbGFzcyBHb29kIHtcclxuICBjb25zdHJ1Y3RvcihpZCwgdGl0bGUsIHByaWNlLCBzcmMsIHF1YW50aXR5KSB7XHJcbiAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICB0aGlzLnByaWNlID0gcHJpY2U7XHJcbiAgICB0aGlzLnNyYyA9IHNyYztcclxuICAgIHRoaXMucXVhbnRpdHkgPSBxdWFudGl0eTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIHJldHVybiAkKGA8ZGl2IGlkPVwiJHt0aGlzLmlkfVwiIGNsYXNzPVwiYWNjX19jYXJ0X19wcm9kdWN0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImFjY19fY2FydF9fcHJvZHVjdF9faW1nXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cIiR7dGhpcy5zcmN9XCIgd2lkdGg9XCI3MlwiIGhlaWdodD1cIjg1XCIgYWx0PVwiUmVib3ggWmFuZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhY2NfX2NhcnRfX3Byb2R1Y3RfX2RhdGFcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJvZHVjdF9fZGF0YV9oZWFkXCI+JHt0aGlzLnRpdGxlfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwicHJvZHVjdF9fZGF0YV9xdWFsaXR5XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtc3RhclwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1zdGFyXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXN0YXJcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtc3RhclwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJmYSBmYS1zdGFyIHF1YWxpdHktd2hpdGVcIiBhcmlhLWhpZGRlbj1cInRydWVcIj48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZHVjdF9fZGF0YV9jYWxjdWxhdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInByb2R1Y3RfX2RhdGFfbnVtYmVyXCI+JHt0aGlzLnF1YW50aXR5fTwvc3Bhbj4geCA8c3BhbiBjbGFzcz1cInByb2R1Y3RfX2RhdGFfcHJpY2VcIj4kJHt0aGlzLnByaWNlfTwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhY2NfX2NhcnRfX3Byb2R1Y3RfX2RlbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBkYXRhLXR5cGU9XCJkZWxcIiBkYXRhLWlkPVwiJHt0aGlzLmlkfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImZhIGZhLXRpbWVzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PmApO1xyXG4gIH1cclxufVxyXG5cclxuXHJcbiIsImNvbnN0IGJhc2tldFJ1biA9IHtcclxuICBzZXR0aW5nczoge1xyXG4gICAgY2xhc3NXcmFwUHJvZHVjdEl0ZW1zOiAnd3JhcC1wcm9kdWN0LWl0ZW0nLFxyXG4gICAgY2xhc3NQcm9kdWN0SXRlbTogJ3Byb2R1Y3QtaXRlbScsXHJcbiAgICBjbGFzc1Byb2R1Y3RUaXRsZTogJ3RpdGxlLWl0ZW0nLFxyXG4gICAgY2xhc3NQcm9kdWN0UHJpY2U6ICdwcmljZS12YWwnLFxyXG4gICAgY2xhc3NQcm9kdWN0SW1hZ2U6ICdwcm9kdWN0LWltZycsXHJcbiAgICBpZFdyYXBUb3BCYXNrZXQ6ICd3cmFwLXRvcC1iYXNrZXQnLFxyXG4gICAgYmFza2V0U2V0dGluZ3M6IHtcclxuICAgICAgcGF0aEpzb25GaWxlOiAnLi9qc29uL2Jhc2tldF9nZXQuanNvbicsXHJcbiAgICAgIGNsYXNzV3JhcFByb2R1Y3RzOiAnYWNjX19jYXJ0X19wcm9kdWN0cy13cmFwJyxcclxuICAgICAgY2xhc3NXcmFwUHJpY2VUb3RhbDogJ2FjY19fY2FydF9fcHJpY2UtdG90YWwnLFxyXG4gICAgICBjbGFzc1dyYXBCdXR0b246ICdhY2NfX2NhcnRfX2J1dHRvbnMnLFxyXG4gICAgICBjbGFzc1RvdGFsRGVzY3JpcHRpb246ICdwcmljZS10b3RhbF9kZXNjcmlwdGlvbicsXHJcbiAgICAgIGNsYXNzVG90YWxWYWx1ZTogJ3ByaWNlLXRvdGFsX3ZhbHVlJyxcclxuICAgICAgaWRUb3RhbFZhbHVlOiAndG90YWwtdG9wLWJhc2tldCcsXHJcbiAgICAgIGNsYXNzQnV0dG9uQ2hlY2tvdXQ6ICdidXR0b25zX2NoZWNrb3V0JyxcclxuICAgICAgY2xhc3NCdXR0b25Hb1RvQ2FydDogJ2J1dHRvbnNfZ28tdG8tY2FydCcsXHJcbiAgICAgIGlkQ291bnRHb29kczogJ2NvdW50LWdvb2RzJyxcclxuICAgIH1cclxuICB9LFxyXG5cclxuICAkZWxlbVdyYXBUb3BCYXNrZXQ6IG51bGwsXHJcbiAgJEVsZW1Ecm9wQmFza2V0OiBudWxsLFxyXG4gIGJhc2tldDogbnVsbCxcclxuXHJcbiAgaW5pdCgpIHtcclxuICAgIHRoaXMuJGVsZW1XcmFwVG9wQmFza2V0ID0gJChgIyR7dGhpcy5zZXR0aW5ncy5pZFdyYXBUb3BCYXNrZXR9YCk7XHJcbiAgICB0aGlzLmJhc2tldCA9IG5ldyBCYXNrZXQodGhpcy5zZXR0aW5ncy5iYXNrZXRTZXR0aW5ncyk7XHJcbiAgICB0aGlzLmJhc2tldC5yZW5kZXIodGhpcy4kZWxlbVdyYXBUb3BCYXNrZXQpO1xyXG4gICAgdGhpcy4kZWxlbVdyYXBUb3BCYXNrZXQub24oJ2NsaWNrJywgJ2J1dHRvbicsIGV2ZW50ID0+IHtcclxuICAgICAgbGV0IHRhcmdldCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCk7XHJcbiAgICAgIGlmICh0YXJnZXQuYXR0cignZGF0YS10eXBlJykgPT09ICdkZWwnKSB7XHJcbiAgICAgICAgdGhpcy5iYXNrZXQucmVtb3ZlKHBhcnNlSW50KHRhcmdldC5hdHRyKCdkYXRhLWlkJykpKVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGxldCAkd3JhcFByb2R1Y3QgPSAkKGAuJHt0aGlzLnNldHRpbmdzLmNsYXNzV3JhcFByb2R1Y3RJdGVtc31gKTtcclxuICAgIGlmICghJHdyYXBQcm9kdWN0Lmxlbmd0aCA+IDApIHJldHVybjtcclxuICAgICR3cmFwUHJvZHVjdC5vbignY2xpY2snLCAnYnV0dG9uW2RhdGEtdHlwZSA9IGFkZF0nLCAoZXZlbnQpID0+IHtcclxuICAgICAgbGV0ICRlbGVtID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKGAuJHt0aGlzLnNldHRpbmdzLmNsYXNzUHJvZHVjdEl0ZW19YCk7XHJcbiAgICAgIHRoaXMuZ29vZEFkZFRvQmFza2V0KCRlbGVtKTtcclxuICAgICAgdGhpcy5zaG93RGlhbG9nKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuZHJvcHBJbml0KCk7XHJcbiAgfSxcclxuXHJcbiAgZ29vZEFkZFRvQmFza2V0KCRlbGVtKSB7XHJcbiAgICBsZXQgcGFyYW0gPSBbXHJcbiAgICAgIHBhcnNlSW50KCRlbGVtLmF0dHIoJ2RhdGEtaWQnKSksXHJcbiAgICAgICRlbGVtLmZpbmQoYC4ke3RoaXMuc2V0dGluZ3MuY2xhc3NQcm9kdWN0VGl0bGV9YCkudGV4dCgpLFxyXG4gICAgICBwYXJzZUludCgkZWxlbS5maW5kKGAuJHt0aGlzLnNldHRpbmdzLmNsYXNzUHJvZHVjdFByaWNlfWApLnRleHQoKSksXHJcbiAgICAgICRlbGVtLmZpbmQoYC4ke3RoaXMuc2V0dGluZ3MuY2xhc3NQcm9kdWN0SW1hZ2V9YCkuYXR0cignc3JjJylcclxuICAgIF07XHJcbiAgICB0aGlzLmJhc2tldC5hZGQoLi4ucGFyYW0pO1xyXG4gIH0sXHJcblxyXG4gIGRyb3BwSW5pdCgpIHtcclxuICAgIHRoaXMuJEVsZW1Ecm9wQmFza2V0ID0gJCgnPGRpdiAvPicsIHtcclxuICAgICAgaWQ6ICdiYXNrZXQnLFxyXG4gICAgfSkuYXBwZW5kVG8oJCgnYm9keScpKVxyXG4gICAgICAuYXBwZW5kKCQoJzxkaXYgLz4nLCB7XHJcbiAgICAgICAgdGV4dDogJ9CU0LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQsiDQutC+0YDQt9C40L3RgyDQv9C10YDQtdGC0LDRidC40YLQtSDRgdGD0LTQsCDRgtC+0LLQsNGAIScsXHJcbiAgICAgICAgY2xhc3M6ICdkcm9wcC1iYXNrZXQtdGV4dCdcclxuICAgICAgfSkpO1xyXG5cclxuICAgIC8v0JTQvtCx0LDQstC70LXQvdC40LUg0YLQvtCy0LDRgNCwINCyINC60LDRgNC30LjQvdGDINC/0LXRgNC10YLQsNGB0LrQuNCy0LDQvdC40LXQvFxyXG4gICAgJCgnLnByb2R1Y3QtaXRlbScpLmRyYWdnYWJsZSh7XHJcbiAgICAgIGhlbHBlcjogJ2Nsb25lJyxcclxuICAgICAgc2NvcGU6ICdnb29kJyxcclxuICAgICAgYWRkQ2xhc3NlczogdHJ1ZSxcclxuICAgICAgY3Vyc29yQXQ6IHtsZWZ0OiA1MCwgdG9wOiA1MH0sXHJcbiAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXHJcbiAgICAgIHN0YXJ0OiAoZXZlbnQsIHVpKSA9PiB7XHJcbiAgICAgICAgdWkuaGVscGVyLmFkZENsYXNzKCd1aS1kcmFnLWFjdGl2YXRlX2dvb2QnKTtcclxuICAgICAgICB0aGlzLiRFbGVtRHJvcEJhc2tldC5hZGRDbGFzcygnYmFza2V0LWRyb3BwJywgNTAwKTtcclxuICAgICAgfSxcclxuICAgICAgc3RvcDogKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuJEVsZW1Ecm9wQmFza2V0LnJlbW92ZUNsYXNzKCdiYXNrZXQtZHJvcHAnLCA1MDApO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcjYmFza2V0JykuZHJvcHBhYmxlKHtcclxuICAgICAgYWN0aXZlQ2xhc3M6ICd1aS1kcmFnLWFjdGl2YXRlX2Jhc2tldCcsXHJcbiAgICAgIHNjb3BlOiAnZ29vZCcsXHJcbiAgICAgIHRvbGVyYW5jZTogXCJwb2ludGVyXCIsXHJcbiAgICAgIGRyb3A6IChldmVudCwgdWkpID0+IHtcclxuICAgICAgICB0aGlzLmdvb2RBZGRUb0Jhc2tldCh1aS5kcmFnZ2FibGUpO1xyXG4gICAgICAgIHRoaXMuc2hvd0RpYWxvZygpO1xyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgc2hvd0RpYWxvZygpIHtcclxuICAgIGxldCAkZGlhbG9nID0gJCgnPGRpdiAvPicsIHtcclxuICAgICAgdGV4dDogJ9Ci0L7QstCw0YAg0LTQvtCx0LDQstC70LXQvSDQsiDQutC+0YDQt9C40L3RgydcclxuICAgIH0pLmRpYWxvZyh7XHJcbiAgICAgIGFwcGVuZFRvOiBcImJvZHlcIixcclxuICAgICAgaGlkZToge2VmZmVjdDogXCJzY2FsZVwiLCBkdXJhdGlvbjogNTAwfSxcclxuICAgICAgcG9zaXRpb246IHtteTogXCJjZW50ZXIgdG9wXCIsIGF0OiBcImNlbnRlciB0b3ArNTBweFwifSxcclxuICAgICAgY2xvc2U6ICgpID0+ICRkaWFsb2cucmVtb3ZlKCksXHJcbiAgICB9KTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAkZGlhbG9nLmRpYWxvZygnY2xvc2UnKTtcclxuICAgIH0sIDEwMDApO1xyXG4gIH0sXHJcbn07XHJcbiQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IGJhc2tldFJ1bi5pbml0KCkpOyIsIi8qKlxyXG4gKiDQmtC70LDRgdGBINGA0LXQsNC70LjQt9GD0LXRgiDQsdC70L7QuiDQutC+0LzQvNC10L3RgtCw0YDQuNGPINC4INCy0YvQstC+0LQg0LXQs9C+INC90LAg0YHRgtGA0LDQvdC40YbRgy5cclxuICovXHJcbmNsYXNzIENvbW1lbnQge1xyXG5cclxuICAvKipcclxuICAgKiDQmtC+0L3RgdGC0YDRg9C60YLQvtGAINC60LvQsNGB0YHQsC5cclxuICAgKiBAcGFyYW0ge2ludH0gY29tbWVudElkIGlkINC60L7QvNC80LXQvdGC0LDRgNC40Y8g0LIg0LHRi9C30LUg0LTQsNC90L3Ri9GFLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lINC40LzRjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8sINC+0YHRgtCw0LLQuNCy0YjQtdCz0L4g0LrQvtC80LzQtdC90YLQsNGA0LjQuS5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSDRgtC10LrRgdGCINC60L7QvNC80LXQvdGC0LDRgNC40Y8uXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoY29tbWVudElkLCBuYW1lLCBtZXNzYWdlKSB7XHJcbiAgICAvLyB0aGlzLmlkX3VzZXIgPSB1c2VySWQ7XHJcbiAgICB0aGlzLnRleHQgPSBtZXNzYWdlO1xyXG4gICAgdGhpcy5pZF9jb21tZW50ID0gY29tbWVudElkO1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuY2xhc3NDb250YWluZXIgPSAnY29tbWVudC1pdGVtJztcclxuICAgIHRoaXMuY2xhc3NOYW1lID0gJ2NvbW1lbnQtaXRlbV9uYW1lJztcclxuICAgIHRoaXMuY2xhc3NNZXNzYWdlID0gJ2NvbW1lbnQtaXRlbV9tZXNzYWdlJztcclxuICAgIHRoaXMuY2xhc3NEZWxCdG4gPSAnY29tbWVudC1pdGVtX2RlbC1idG4nO1xyXG4gICAgdGhpcy5jbGFzc0FwcHJvdmVsQnRuID0gJ2NvbW1lbnQtaXRlbV9hcHByb3ZlLWJ0bic7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDQodC+0LHQuNGA0LDQtdGCINCx0LvQvtC6INGBINC60L7QvNC80LXQvdGC0LDRgNC40LXQvCDQuCDQstGL0LLQvtC00LjRgiDQtdCz0L4g0L3QsCDRgdGC0YDQsNC90LjRhtGDLlxyXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSAkalF1ZXJ5RWxlbWVudCDRjdC70LXQvNC10L3Rgi3QvtCx0LXRgNGC0LrQsCDQsiDQutC+0YLQvtGA0YPRjiDQstGL0LLQvtC00LjQvCDQutC+0LzQvNC10L3RgtCw0YDQuNC4LlxyXG4gICAqL1xyXG4gIHJlbmRlcigkalF1ZXJ5RWxlbWVudCkge1xyXG4gICAgY29uc3QgJGNvbnRhaW5lckNvbW1lbnQgPSAkKCc8ZGl2IC8+Jywge1xyXG4gICAgICBjbGFzczogdGhpcy5jbGFzc0NvbnRhaW5lcixcclxuICAgICAgJ2RhdGEtaWQnOiB0aGlzLmlkX2NvbW1lbnQsXHJcbiAgICAgICdkYXRhLWFwcHJvdmVkJzogZmFsc2UsXHJcbiAgICB9KTtcclxuICAgIGNvbnN0ICRuYW1lQ29tbWVudCA9ICQoJzxwIC8+Jywge1xyXG4gICAgICBjbGFzczogdGhpcy5jbGFzc05hbWUsXHJcbiAgICAgIHRleHQ6IHRoaXMubmFtZSxcclxuICAgIH0pO1xyXG4gICAgY29uc3QgJG1lc3NhZ2VDb21tZW50ID0gJCgnPHAgLz4nLCB7XHJcbiAgICAgIGNsYXNzOiB0aGlzLmNsYXNzTWVzc2FnZSxcclxuICAgICAgdGV4dDogdGhpcy50ZXh0LFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCAkZGVsQnRuQ29tbWVudCA9ICQoJzxidXR0b24gLz4nLCB7XHJcbiAgICAgIGNsYXNzOiB0aGlzLmNsYXNzRGVsQnRuLFxyXG4gICAgICAnZGF0YS1pZCc6IHRoaXMuaWRfY29tbWVudCxcclxuICAgICAgJ2RhdGEtdHlwZSc6ICdkZWwnLFxyXG4gICAgICB0ZXh0OiAn0KPQtNCw0LvQuNGC0YwnLFxyXG4gICAgfSk7XHJcbiAgICBjb25zdCAkYXBwcm92ZUJ0bkNvbW1lbnQgPSAkKCc8YnV0dG9uIC8+Jywge1xyXG4gICAgICBjbGFzczogdGhpcy5jbGFzc0FwcHJvdmVsQnRuLFxyXG4gICAgICAnZGF0YS1pZCc6IHRoaXMuaWRfY29tbWVudCxcclxuICAgICAgJ2RhdGEtdHlwZSc6ICdhcHAnLFxyXG4gICAgICB0ZXh0OiAn0J7QtNC+0LHRgNC40YLRjCcsXHJcbiAgICB9KTtcclxuICAgICRjb250YWluZXJDb21tZW50XHJcbiAgICAgIC5hcHBlbmQoJG5hbWVDb21tZW50KVxyXG4gICAgICAuYXBwZW5kKCRtZXNzYWdlQ29tbWVudClcclxuICAgICAgLmFwcGVuZCgkZGVsQnRuQ29tbWVudClcclxuICAgICAgLmFwcGVuZCgkYXBwcm92ZUJ0bkNvbW1lbnQpXHJcbiAgICAgIC5hcHBlbmRUbygkalF1ZXJ5RWxlbWVudCk7XHJcbiAgfVxyXG59IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4vKipcclxuICog0J7QsdCx0YrQtdC60YIg0YEg0L3QsNGB0YLRgNC+0LnQutCw0LzQuCDQtNC70Y8g0YDQsNCx0L7RgtGLINGB0LrRgNC40L/RgtCwLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gaWRDb250YWluZXIgaWQg0Y3Qu9C10LzQtdC90YLQsCDQvtGB0L3QvtCy0L3QvtCz0L4g0LrQvtC90YLQtdC50L3QtdGA0LBcclxuICogQHByb3BlcnR5IHtzdHJpbmd9IGlkQ29tbWVudEJsb2NrIGlkINGN0LvQtdC80LXQvdGC0LAg0LrQvtC90YLQtdC50L3QtdGA0LAg0LTQu9GPINCy0YvQstC+0LTQsCDQutC+0LzQvNC10L3RgtCw0YDQuNC10LIuXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjbGFzc0NvbW1lbnRBcHByb3ZlZCBjbGFzcyDQv9GA0LjRgdCy0LDQtdCy0LDQtdC80YvQuSDQvtC00L7QsdGA0LXQvdC90L7QvNGDINC60L7QvNC80LXQvdGC0LDRgNC40Y4uXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB1cmxHZXRBbGxDb21tZW50cyDQv9GD0YLRjCDQuiDRhNCw0LnQu9GDKNC30LDQs9C70YPRiNC60LUpIEpTT04g0L7RgtCy0LXRgtCwINGB0LXRgNCy0LXRgNCwINC/0YDQuCDQv9C+0LvRg9GH0LXQvdC40Lgg0LrQvtC80LzQtdC90YLQsNGA0LjQtdCyLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdXJsRGVsQ29tbWVudCDQv9GD0YLRjCDQuiDRhNCw0LnQu9GDKNC30LDQs9C70YPRiNC60LUpIEpTT04g0L7RgtCy0LXRgtCwINGB0LXRgNCy0LXRgNCwINC/0YDQuCDRg9C00LDQu9C10L3QuNC4INC60L7QvNC80LXQvdGC0LDRgNC40Y8uXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB1cmxBcHByb3ZhbENvbW1lbnQg0L/Rg9GC0Ywg0Log0YTQsNC50LvRgyjQt9Cw0LPQu9GD0YjQutC1KSBKU09OINC+0YLQstC10YLQsCDRgdC10YDQstC10YDQsCDQv9GA0Lgg0L7QtNC+0LHRgNC10L3QuNC4INC60L7QvNC80LXQvdGC0LDRgNC40Y8uXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB1cmxBZGRDb21tZW50INC/0YPRgtGMINC6INGE0LDQudC70YMo0LfQsNCz0LvRg9GI0LrQtSkgSlNPTiDQvtGC0LLQtdGC0LAg0YHQtdGA0LLQtdGA0LAg0L/RgNC4INC00L7QsdCw0LLQu9C10L3QuNC4INC60L7QvNC80LXQvdGC0LDRgNC40Y8uXHJcbiAqL1xyXG5jb25zdCBzZXR0aW5ncyA9IHtcclxuICBpZENvbnRhaW5lcjogJ2NvbnRhaW5lcicsXHJcbiAgaWRDb21tZW50QmxvY2s6ICdjb21tZW50X3dyYXBwZXInLFxyXG4gIGNsYXNzQ29tbWVudEFwcHJvdmVkOiAnYXBwcm92ZWQnLFxyXG4gIHVybEdldEFsbENvbW1lbnRzOiAnanNvbi9yZXZpZXcubGlzdC5qc29uJyxcclxuICB1cmxEZWxDb21tZW50OiAnanNvbi9yZXZpZXcuZGVsZXRlLmpzb24nLFxyXG4gIHVybEFwcHJvdmFsQ29tbWVudDogJ2pzb24vcmV2aWV3LnN1Ym1pdC5qc29uJyxcclxuICB1cmxBZGRDb21tZW50OiAnanNvbi9yZXZpZXcuYWRkLmpzb24nLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqINCe0LHRitC10LrRgiDRgNCw0LHQvtGC0Ysg0YEg0LrQvtC80LzQtdC90YLQsNGA0LjRj9C80LguXHJcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBzZXR0aW5ncyDQv9C+0LTQutC70Y7Rh9C10L3QuNC1INC+0LHRitC10LrRgtCwINGBINC90LDRgdGC0YDQvtC50LrQsNC80LguXHJcbiAqIEBwcm9wZXJ0eSB7alF1ZXJ5fSAkZWxDb21tZW50QmxvY2sg0Y3Qu9C10LzQtdC90YIt0L7QsdC10YDRgtC60LAg0LTQu9GPINCy0YvQstC+0LTQuNC80YvRhSDQutC+0LzQvNC10L3RgtCw0YDQuNC10LIuXHJcbiAqIEBwcm9wZXJ0eSB7QXJyYXl9IGFyckFsbENvbW1lbnRzINC80LDRgdGB0LjQsiDQtNC70Y8g0LrQvtC80LzQtdC90YLQsNGA0LjQtdCyLCDQv9C+0LvRg9GH0LDQtdC80YvRhSDRgSDRgdC10YDQstC10YDQsC5cclxuICovXHJcbmNvbnN0IGNvbW1lbnRCbG9jayA9IHtcclxuICBzZXR0aW5ncyxcclxuICAkZWxDb21tZW50QmxvY2s6IG51bGwsXHJcbiAgYXJyQWxsQ29tbWVudHM6IFtdLFxyXG5cclxuICAvKipcclxuICAgKiDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQsdC70L7QutCwINGBINC60L7QvNC80LXQvdGC0LDRgNC40Y/QvNC4LCDQt9Cw0L/RgNC+0YEg0Log0YHQtdGA0LLQtdGA0YMg0LTQu9GPINC/0L7Qu9GD0YfQtdC90LjRjyDRgtC10LrRg9GJ0LjRhSDQutC+0LzQvNC10L3RgtCw0YDQuNC10LIuXHJcbiAgICog0J/QvtC70YPRh9Cw0LXRgiDQutC+0LzQvNC10L3RgtCw0YDQuNC4INGBINGB0LXRgNCy0LXRgNCwINC4INC+0YLRgNC40YHQvtCy0LDQstCw0LXRgiDQuNGFLlxyXG4gICAqINCd0LDQstGI0LjQstCw0LXRgiDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQvdCw0LbQsNGC0LjRjyDQutC90L7Qv9C+0LouXHJcbiAgICog0JIg0YHQu9GD0YfQsNC1INC+0YjQuNCx0LrQuCDQvtGC0LLQtdGC0LAg0L7RgiDRgdC10YDQstC10YDQsCwg0LLRi9Cy0L7QtNC40YIg0YHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1INCyINC60L7QvdGB0L7Qu9GMLlxyXG4gICAqL1xyXG4gIGluaXQoKSB7XHJcbiAgICB0aGlzLiRlbENvbW1lbnRCbG9jayA9ICQoYCMke3RoaXMuc2V0dGluZ3MuaWRDb21tZW50QmxvY2t9YCk7XHJcbiAgICAkKGAjJHt0aGlzLnNldHRpbmdzLmlkQ29udGFpbmVyfWApLm9uKCdjbGljaycsICdidXR0b24nLCBldmVudCA9PiB0aGlzLmJ0bkNsaWNrSGFuZGxlcihldmVudCkpO1xyXG4gICAgdGhpcy5hamF4KHtcclxuICAgICAgdXJsOiB0aGlzLnNldHRpbmdzLnVybEdldEFsbENvbW1lbnRzLFxyXG4gICAgICBkYXRhOiAnJyxcclxuICAgICAgc3VjY2VzczogZGF0YSA9PiB7XHJcbiAgICAgICAgaWYgKGRhdGEucmVzdWx0ICYmIGRhdGEucmVzdWx0ID09PSAwKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGDQntGI0LjQsdC60LAhINCe0YLQstC10YIg0L7RgiDRgdC10YDQstC10YDQsDogJHtkYXRhLmVycm9yX21lc3NhZ2V9YCk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYXJyQWxsQ29tbWVudHMgPSBkYXRhLmNvbW1lbnRzO1xyXG5cclxuICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiDQntGC0YDQuNGB0L7QstGL0LLQsNC10YIg0LHQu9C+0LrQuCDRgSDQutC+0LzQvNC10L3RgtCw0YDQuNGP0LzQuCDQuNC3INC80LDRgdGB0LjQstCwINGBINC60L7QvNC80LXQvdGC0LDRgNC40Y/QvNC4LlxyXG4gICAqL1xyXG4gIHJlbmRlcigpIHtcclxuICAgIGlmICh0aGlzLmFyckFsbENvbW1lbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChjb25zdCBvYmogb2YgdGhpcy5hcnJBbGxDb21tZW50cykge1xyXG4gICAgICAgIGNvbnN0IGNvbW1lbnQgPSBuZXcgQ29tbWVudChvYmouaWRfY29tbWVudCwgb2JqLm5hbWUsIG9iai50ZXh0KTtcclxuICAgICAgICBjb21tZW50LnJlbmRlcih0aGlzLiRlbENvbW1lbnRCbG9jayk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQutC70LjQutCwINC/0L4g0LrQvdC+0L/QutC1LlxyXG4gICAqINCe0L/RgNC10LTQtdC70Y/QtdGCINC60LDQutCw0Y8g0LHRi9C70LAg0L3QsNC20LDRgtCwINC60L3QvtC/0LrQsCDQuCDQsiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0Y3RgtC+0LPQviDQt9Cw0L/Rg9GB0LrQsNC10YIg0L7Qv9GA0LXQtNC10LvQtdC90L3Ri9C5INC80LXRgtC+0LQuXHJcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQg0YHQvtCx0YvRgtC40LUg0LrQu9C40LrQsCDQv9C+INC60L3QvtC/0LrQtS5cclxuICAgKi9cclxuICBidG5DbGlja0hhbmRsZXIoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC50YXJnZXQuZGF0YXNldC50eXBlID09PSAnZGVsJykge1xyXG4gICAgICB0aGlzLnJlbW92ZShldmVudC50YXJnZXQpO1xyXG4gICAgfSBlbHNlIGlmIChldmVudC50YXJnZXQuZGF0YXNldC50eXBlID09PSAnYXBwJykge1xyXG4gICAgICB0aGlzLmFwcHJvdmUoZXZlbnQudGFyZ2V0KTtcclxuICAgIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmRhdGFzZXQudHlwZSA9PT0gJ2FkZCcpIHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5hZGQoZXZlbnQudGFyZ2V0KTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiDQntC00L7QsdGA0LXQvdC40LUg0L7Qv9GA0LXQtNC10LvQtdC90L3QvtCz0L4g0LrQvtC80LzQtdC90YLQsNGA0LjRjy4g0J7RgtC/0YDQsNCy0LvRj9C10YIgaWQg0L7QtNC+0LHRgNGP0LXQvNC+0LPQviDQutC+0LzQvNC10L3RgtCw0YDQuNGPINC90LAg0YHQtdGA0LLQtdGAINC4INCy0YHQu9GD0YfQsNC1INGD0LTQsNGH0L3QvtCz0L4g0L7RgtCy0LXRgtCwXHJcbiAgICog0L7RgiDRgdC10YDQstC10YDQsCDQtNC+0LHQsNCy0LvRj9C10YIg0LrQu9Cw0YHRgSDQvtC00L7QsdGA0LXQvdC40Y8g0Log0YLQtdC60YPRidC10LzRgyDQutC+0LzQvNC10L3RgtCw0YDQuNGOINC4INGD0LTQsNC70Y/QtdGCINC60L3QvtC/0LrRgyDQvtC00L7QsdGA0LXQvdC40Y8g0YMg0YLQtdC60YPRidC10LPQviDQutC+0LzQvNC10L3RgtCw0YDQuNGPLlxyXG4gICAqINCV0YHQu9C4INGB0LXRgNCy0LXRgCDQstC10YDQvdGD0Lsg0L7RiNC40LHQutGDLCDRgtC+INCy0YvQstC+0LTQuNC8INGB0L7QvtCx0YnQtdC90LjQtSDQvtCxINC+0YjQuNCx0LrQtSDQuCDQvdC1INC/0YDQvtC40LfQstC+0LTQuNC8INC90Lgg0LrQsNC60LjQtSDQuNC30LzQtdC90LXQvdC40Y8g0YEg0LrQvtC80LzQtdC90YLQsNGA0LjQtdC8LlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW0g0LrQvdC+0L/QutC4INC+0LTQvtCx0YDQtdC90LjRjyDQsdC70L7QutCwINGC0LXQutGD0YnQtdCz0L4g0LrQvtC80LzQtdC90YLQsNGA0LjRjy5cclxuICAgKi9cclxuICBhcHByb3ZlKGVsZW0pIHtcclxuICAgIHRoaXMuYWpheCh7XHJcbiAgICAgIHVybDogdGhpcy5zZXR0aW5ncy51cmxBcHByb3ZhbENvbW1lbnQsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBpZF9jb21tZW50OiBlbGVtLmRhdGFzZXQuaWRcclxuICAgICAgfSxcclxuICAgICAgc3VjY2VzczogZGF0YSA9PiB7XHJcbiAgICAgICAgKGZ1bmN0aW9uIChkYXRhLCBlbGVtLCBvYmopIHtcclxuICAgICAgICAgIGlmIChkYXRhLnJlc3VsdCAmJiBkYXRhLnJlc3VsdCA9PT0gMSkge1xyXG4gICAgICAgICAgICAkKGVsZW0pLnBhcmVudCgnLmNvbW1lbnQtaXRlbScpLmFkZENsYXNzKG9iai5zZXR0aW5ncy5jbGFzc0NvbW1lbnRBcHByb3ZlZClcclxuICAgICAgICAgICAgICAuYXR0cignZGF0YS1hcHByb3ZlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAkKGVsZW0pLnJlbW92ZSgpXHJcblxyXG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnJlc3VsdCA9PT0gMCkge1xyXG4gICAgICAgICAgICBhbGVydChg0KHQtdGA0LLQtdGAINCy0LXRgNC90YPQuyDQvtGI0LjQsdC60YM6ICR7ZGF0YS5lcnJvcl9tZXNzYWdlfWApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0oZGF0YSwgZWxlbSwgdGhpcykpXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqINCj0LTQsNC70LXQvdC40LUg0L7Qv9GA0LXQtNC10LvQtdC90L3QvtCz0L4g0LrQvtC80LzQtdC90YLQsNGA0LjRjy4g0J7RgtC/0YDQsNCy0LvRj9C10YIgaWQg0YPQtNCw0LvRj9C10LzQvtCz0L4g0LrQvtC80LzQtdC90YLQsNGA0LjRjyDQvdCwINGB0LXRgNCy0LXRgCDQuCDQstGB0LvRg9GH0LDQtSDRg9C00LDRh9C90L7Qs9C+INC+0YLQstC10YLQsFxyXG4gICAqINC+0YIg0YHQtdGA0LLQtdGA0LAg0YPQtNCw0LvRj9C10YIg0LHQu9C+0Log0LTQsNC90L3QvtCz0L4g0LrQvtC80LzQtdC90YLQsNGA0LjRjy5cclxuICAgKiDQldGB0LvQuCDRgdC10YDQstC10YAg0LLQtdGA0L3Rg9C7INC+0YjQuNCx0LrRgywg0YLQviDQstGL0LLQvtC00LjQvCDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LUg0Lgg0L3QtSDQv9GA0L7QuNC30LLQvtC00LjQvCDQvdC4INC60LDQutC40LUg0LjQt9C80LXQvdC10L3QuNGPINGBINC60L7QvNC80LXQvdGC0LDRgNC40LXQvC5cclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtINC60L3QvtC/0LrQuCDRg9C00LDQu9C10L3QuNGPINCx0LvQvtC60LAg0YLQtdC60YPRidC10LPQviDQutC+0LzQvNC10L3RgtCw0YDQuNGPLlxyXG4gICAqL1xyXG4gIHJlbW92ZShlbGVtKSB7XHJcbiAgICB0aGlzLmFqYXgoe1xyXG4gICAgICB1cmw6IHRoaXMuc2V0dGluZ3MudXJsRGVsQ29tbWVudCxcclxuICAgICAgZGF0YToge1xyXG4gICAgICAgIGlkX2NvbW1lbnQ6IGVsZW0uZGF0YXNldC5pZFxyXG4gICAgICB9LFxyXG4gICAgICBzdWNjZXNzOiBkYXRhID0+IHtcclxuICAgICAgICAoZnVuY3Rpb24gKGRhdGEsIGVsZW0pIHtcclxuICAgICAgICAgIGlmIChkYXRhLnJlc3VsdCAmJiBkYXRhLnJlc3VsdCA9PT0gMSkge1xyXG4gICAgICAgICAgICAkKGVsZW0pLnBhcmVudChgLmNvbW1lbnQtaXRlbWApLnJlbW92ZSgpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnJlc3VsdCA9PT0gMCkge1xyXG4gICAgICAgICAgICBhbGVydChg0KHQtdGA0LLQtdGAINCy0LXRgNC90YPQuyDQvtGI0LjQsdC60YM6ICR7ZGF0YS5lcnJvcl9tZXNzYWdlfWApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0oZGF0YSwgZWxlbSkpXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqINCU0L7QsdCw0LLQu9C10L3QuNC1INC90L7QstC+0LPQviDQutC+0LzQvNC10L3RgtCw0YDQuNGPLiDQldGB0LvQuCDQtNC+0YHRgtGD0L/QtdC9INGB0LrRgNC40L/RgiDQtNC70Y8g0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC80YssINGC0L4g0LfQsNGD0YHQutCw0LXRgiDQstCw0LvQuNC00LDRhtC40Y4g0Lgg0L/RgNC4INC/0YDQvtGF0L7QttC00LXQvdC40LhcclxuICAgKiDQstCw0LvQuNC00LDRhtC40Lgg0L7RgtC/0YDQsNCy0LvRj9C10YIg0LTQsNC90L3Ri9C1INC90L7QstC+0LPQviDQutC+0LzQvNC10L3RgtCw0YDQuNGPINC90LAg0YHQtdGA0LLQtdGAINC4INCy0YHQu9GD0YfQsNC1INGD0LTQsNGH0L3QvtCz0L4g0L7RgtCy0LXRgtCwINC+0YIg0YHQtdGA0LLQtdGA0LAg0LTQvtCx0LDQstC70Y/QtdGCINCx0LvQvtC6XHJcbiAgICog0L3QvtCy0L7Qs9C+INC60L7QvNC80LXQvdGC0LDRgNC40Y8g0L3QviDRgdGC0YDQsNC90LjRhtGDLlxyXG4gICAqINCV0YHQu9C4INGB0LrRgNC40L8g0LLQsNC70LjQtNCw0YbQuNC4INC90LUg0LTQvtGB0YLRg9C/0LXQvSwg0YLQviDQvdC1INC/0YDQvtC40LfQstC+0LTQuNGCINC/0YDQvtGG0LXRgdGBINCy0LDQu9C40LTQsNGG0LjQuCDQuCDQv9C10YDQtdGF0L7QtNC40YIg0Log0L7RgtC/0YDQsNCy0LrQtSDQtNCw0L3QvdGL0YUuXHJcbiAgICog0JXRgdC70Lgg0YHQtdGA0LLQtdGAINCy0LXRgNC90YPQuyDQvtGI0LjQsdC60YMsINGC0L4g0LLRi9Cy0L7QtNC40Lwg0YHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1INC4INC90LUg0L/RgNC+0LjQt9Cy0L7QtNC40Lwg0L3QuCDQutCw0LrQuNC1INC00LXQudGB0YLQstC40Y8g0YEg0LrQvtC80LzQtdC90YLQsNGA0LjQtdC8LlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW0g0LrQvdC+0L/QutC4INC+0YLQv9GA0LDQstC60Lgg0LTQsNC90L3Ri9GFINGE0L7RgNC80YsuXHJcbiAgICovXHJcbiAgYWRkKGVsZW0pIHtcclxuICAgIGlmICh2YWxpZGF0ZUZvcm0pIHtcclxuICAgICAgaWYgKCF2YWxpZGF0ZUZvcm0uc3RhcnRWYWxpZGF0ZSgkKGVsZW0pLnBhcmVudHMoJ2Zvcm0nKSkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJChlbGVtKS5wYXJlbnRzKCdmb3JtJykuZmluZChgLiR7dmFsaWRhdGVGb3JtLmNsYXNzVmFsaWRhdGVJbnB1dH1gKS5yZW1vdmVDbGFzcyh2YWxpZGF0ZUZvcm0uY2xhc3NWYWxpZGF0ZUlucHV0KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IHVzZXJOYW1lSW5wdXQgPSAkKGVsZW0pLnNpYmxpbmdzKGAjbmFtZVVzZXJgKTtcclxuICAgIGxldCB1c2VyTWVzc2FnZUlucHV0ID0gJChlbGVtKS5zaWJsaW5ncyhgI2NvbW1lbnRVc2VyYCk7XHJcbiAgICBsZXQgdXNlck5hbWUgPSB1c2VyTmFtZUlucHV0LnZhbCgpO1xyXG4gICAgbGV0IHVzZXJNZXNzYWdlID0gdXNlck1lc3NhZ2VJbnB1dC52YWwoKTtcclxuICAgIGlmICh1c2VyTmFtZSAmJiB1c2VyTWVzc2FnZSkge1xyXG4gICAgICBsZXQgdXNlcklkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwICogdXNlck5hbWUubGVuZ3RoKTtcclxuICAgICAgdGhpcy5hamF4KHtcclxuICAgICAgICB1cmw6IHRoaXMuc2V0dGluZ3MudXJsQWRkQ29tbWVudCxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICBpZF91c2VyOiB1c2VySWQsXHJcbiAgICAgICAgICBuYW1lOiB1c2VyTmFtZSxcclxuICAgICAgICAgIHRleHQ6IHVzZXJNZXNzYWdlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBkYXRhID0+IHtcclxuICAgICAgICAgIChmdW5jdGlvbiAoZGF0YSwgZWxlbSwgYXJyQ29tbWVudHMpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEucmVzdWx0ICYmIGRhdGEucmVzdWx0ID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgbmV3Q29tbWVudCA9IG5ldyBDb21tZW50KHVzZXJJZCwgdXNlck5hbWUsIHVzZXJNZXNzYWdlKTtcclxuICAgICAgICAgICAgICBuZXdDb21tZW50LnJlbmRlcihlbGVtKTtcclxuICAgICAgICAgICAgICBhcnJDb21tZW50cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIFwiaWRfY29tbWVudFwiOiB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogdXNlck5hbWUsXHJcbiAgICAgICAgICAgICAgICBcInRleHRcIjogdXNlck1lc3NhZ2VcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICB1c2VyTmFtZUlucHV0LnZhbCgnJyk7XHJcbiAgICAgICAgICAgICAgdXNlck1lc3NhZ2VJbnB1dC52YWwoJycpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEucmVzdWx0ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgYWxlcnQoYNCh0LXRgNCy0LXRgCDQstC10YDQvdGD0Lsg0L7RiNC40LHQutGDOiAke2RhdGEuZXJyb3JfbWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfShkYXRhLCB0aGlzLiRlbENvbW1lbnRCbG9jaywgdGhpcy5hcnJBbGxDb21tZW50cykpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiDQntCx0LXRgNGC0LrQsCDQtNC70Y8gYWpheCDQt9Cw0L/RgNC+0YHQsC5cclxuICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW0g0L/QsNGA0LDQvNC10YLRgNGLINC30LDQv9GA0L7RgdCwLlxyXG4gICAqL1xyXG4gIGFqYXgocGFyYW0pIHtcclxuICAgICQuYWpheCh7XHJcbiAgICAgIHVybDogcGFyYW0udXJsLFxyXG4gICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgZGF0YTogcGFyYW0uZGF0YSxcclxuICAgICAgc3VjY2VzczogcGFyYW0uc3VjY2VzcyxcclxuICAgICAgZXJyb3I6IChkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUikgPT4gY29uc29sZS5lcnJvcih0ZXh0U3RhdHVzLCBqcVhIUiksXHJcbiAgICB9KTtcclxuICB9LFxyXG5cclxufTsiLCJcInVzZSBzdHJpY3RcIjtcclxuLypcclxuY29uc3QgYmlydGhkYXlJbnB1dCA9IHtcclxuICBpZElucHV0RGF0ZXBpY2tlcjogJ2JpcnRoZGF5JyxcclxuICBlcnJvck1lc3NhZ2U6ICfQktCy0LXQtNC40YLQtSDQtNCw0YLRgyDRgNC+0LbQtNC10L3QuNGPINCyINGE0L7RgNC80LDRgtC1IFwi0LTQtC/QvNC8L9Cz0LPQs9CzXCInLFxyXG4gIHJlZ0V4cENpdHk6IC9eWzAtM11bMC05XVxcL1swMV1bMC05XVxcL1sxMl1bMC05XXszfSQvLFxyXG5cclxuICBpbml0KCkge1xyXG4gICAgJChgIyR7dGhpcy5pZElucHV0RGF0ZXBpY2tlcn1gKS5kYXRlcGlja2VyKHtcclxuICAgICAgY2hhbmdlTW9udGg6IHRydWUsXHJcbiAgICAgIGNoYW5nZVllYXI6IHRydWUsXHJcbiAgICAgIGZpcnN0RGF5OiAxLFxyXG4gICAgICBkYXlOYW1lc01pbjogWyfQktGBJywgJ9Cf0L0nLCAn0JLRgicsICfQodGAJywgJ9Cn0YInLCAn0J/RgicsICfQodCxJ10sXHJcbiAgICAgIGRheU5hbWVzOiBbJ9CS0L7RgdC60YDQtdGB0LXQvdGM0LUnLCAn0J/QvtC90LXQtNC10LvRjNC90LjQuicsICfQktGC0L7RgNC90LjQuicsICfQodGA0LXQtNCwJywgJ9Cn0LXRgtCy0LXRgNCzJywgJ9Cf0Y/RgtC90LjRhtCwJywgJ9Ch0YPQsdCx0L7RgtCwJ10sXHJcbiAgICAgIGRhdGVGb3JtYXQ6ICdkZC9tbS95eScsXHJcbiAgICAgIG1vbnRoTmFtZXNTaG9ydDogWyfQr9C90LInLCAn0KTQtdCyJywgJ9Cc0LDRgCcsICfQkNC/0YAnLCAn0JzQsNC5JywgJ9CY0Y7QvScsICfQmNGO0LsnLCAn0JDQstCzJywgJ9Ch0LXQvScsICfQntC60YInLCAn0J3QvtGPJywgJ9CU0LXQuiddLFxyXG4gICAgfSk7XHJcbiAgfSxcclxuXHJcbiAgdmFsaWRhdGUoZWxlbSkge1xyXG4gICAgcmV0dXJuIHRoaXMucmVnRXhwQ2l0eS50ZXN0KGVsZW0udmFsdWUudHJpbSgpKTtcclxuICB9LFxyXG59O1xyXG4qL1xyXG5cclxuLypcclxuLyEqKlxyXG4gKiDQntCx0YDQsNCx0LDRgtGL0LLQsNC10YIgaW5wdXQg0LTQu9GPINCy0LLQvtC00LAg0LPQvtGA0L7QtNCwLCDQv9GA0Lgg0LLQstC+0LTQtSDQvdCw0LfQstCw0L3QuNGPINCz0L7RgNC+0LTQsCDQv9GA0LXQtNC70LDQs9Cw0LXRgiDQstCw0YDQuNCw0L3RgtGLLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gaWRJbnB1dENpdHkgaWQgSFRNTCDRjdC70LXQvNC10L3RgtCwIGlucHV0LlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZXJyb3JNZXNzYWdlINGB0L7QtNC10YDQttC40YIg0YHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1INCy0LDQu9C40LTQsNGG0LjQuCDQtNC70Y8g0L/QvtC70Y8gXCLQk9C+0YDQvtC0XCIuXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB1cmxKU09OINC/0YPRgtGMINC6INGE0LDQudC70YMgLmpzb24g0YEg0L7QsdGK0LXQutGC0LDQvNC4INCz0L7RgNC+0LTQvtCyLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gaWRFbGVtTGlzdFNlYXJjaENpdHkgaWQgSFRNTCDRjdC70LXQvNC10L3RgtCwINCyINC60L7RgtC+0YDQvtC8INC/0LXRgNC00LvQsNCz0LDRjtGC0YHRjyDQstCw0YDQuNCw0L3RgtGLINCz0L7RgNC+0LTQvtCyLlxyXG4gKiBAcHJvcGVydHkge1JlZ0V4cH0gcmVnRXhwQ2l0eSDRgNC10LPRg9C70Y/RgNC90L7QtSDQstGL0YDQsNC20LXQvdC40LUg0LTQu9GPINCy0LDQu9C40LTQsNGG0LjQuCDQv9C+0LvRjyBcItCT0L7RgNC+0LRcIi5cclxuICohL1xyXG5jb25zdCBpbnB1dENpdHkgPSB7XHJcbiAgaWRJbnB1dENpdHk6ICdjaXR5JyxcclxuICBlcnJvck1lc3NhZ2U6ICfQktCy0LXQtNC40YLQtSDQs9C+0YDQvtC0JyxcclxuICB1cmxKU09OOiAnanNvbi9jaXR5Lmpzb24nLFxyXG4gIGlkRWxlbUxpc3RTZWFyY2hDaXR5OiAnc2VhcmNoLWNpdHknLFxyXG4gIHJlZ0V4cENpdHk6IC9eW2EtetCwLdGP0ZEgXXsyLH0kL2ksXHJcbiAgZGF0YUNpdHk6IFtdLC8vXHJcblxyXG4gIC8hKipcclxuICAgKiDQktC10YjQsNC10YIg0YHQvtCx0YvRgtC40Y8g0L3QsCBpbnB1dCDQtNC70Y8g0LLQstC+0LTQsCDQs9C+0YDQvtC00LAuXHJcbiAgICohL1xyXG4gIGluaXQoKSB7XHJcbiAgICAkKGAjJHt0aGlzLmlkSW5wdXRDaXR5fWApLm9uKCdrZXl1cCBjbGljaycsIGV2ZW50ID0+IHRoaXMua2V5UHJlc3NIYW5kbGVyKGV2ZW50KSk7XHJcbiAgICAvLyAub24oJyBmb2N1c291dCcsICgpID0+IHRoaXMub3V0T3B0aW9uQ2l0aWVzKG51bGwsIHRydWUpKTtcclxuXHJcbiAgICAkLmdldEpTT04odGhpcy51cmxKU09OLCAoZGF0YSkgPT4gdGhpcy5kYXRhQ2l0eSA9IGRhdGEpOy8vXHJcbiAgfSxcclxuXHJcbiAgLyEqKlxyXG4gICAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC90LDQttCw0YLQuNGPINC90LAg0LrQvdC+0L/QutC4INC60LvQsNCy0LjQsNGC0YPRgNGLINC/0YDQuCDQstCy0L7QtNC1INC90LDQt9Cy0LDQvdC40Y8g0LPQvtGA0L7QtNCwLlxyXG4gICAqINCV0YHQu9C4INGB0LjQvNCy0L7Qu9C+0LIg0LLQstC10LTQtdC90L4g0LzQtdC90YzRiNC1IDMg0YLQviDRg9C00LDQu9GP0LXQvCDQvtC60L3QviDRgSDQv9GA0LXQtNC70L7Qs9Cw0LXQvNGL0Lwg0YHQv9C40YHQutC+0Lwg0LPQvtGA0L7QtNC+0LIsINC10YHQu9C4INC+0L0g0LXRgdGC0YwuXHJcbiAgICog0JXRgdC70Lgg0YHQuNC80LLQvtC70L7QsiDQstCy0LXQtNC10L3QviAzINC4INCx0L7Qu9GM0YjQtSwg0L7RgtC/0YDQsNCy0LvRj9C10YIg0LfQsNC/0YDQvtGBINC90LAg0L/QvtC70YPRh9C10L3QuNGPINC80LDRgdGB0LjQstCwINGBINC+0LHRitC10LrRgtCw0LzQuCDQs9C+0YDQvtC00L7QsixcclxuICAgKiDQuNC90LjRhtC40LDQu9C40LfQuNGA0YPQtdGCINGA0LXQs9GD0LvRj9GA0L3QvtC1INCy0YvRgNCw0LbQtdC90LjQtSDQuCDQstGL0LfRi9Cy0LDQtdGCINGE0YPQvdC60YbQuNGOINC00LvRjyDQv9Cw0YDRgdC40L3QutCwINC80LDRgdGB0LjQstCwINGBINCz0L7RgNC+0LTQsNC80LguXHJcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQg0YHQvtCx0YvRgtC40LUg0L/RgNC+0LjQt9C+0YjQtdC00YjQtdC1INCyINC/0L7Qu9C1INCy0LLQvtC00LAg0L3QsNC30LLQsNC90LjRjyDQs9C+0YDQvtC00LAuXHJcbiAgICohL1xyXG4gIGtleVByZXNzSGFuZGxlcihldmVudCkge1xyXG4gICAgY29uc3QgaW5wdXQgPSBldmVudC50YXJnZXQ7XHJcbiAgICBjb25zdCBkYXRhVXNlciA9IGlucHV0LnZhbHVlO1xyXG4gICAgaWYgKGRhdGFVc2VyLmxlbmd0aCA8IDMpIHtcclxuICAgICAgdGhpcy5vdXRPcHRpb25DaXRpZXMobnVsbCwgdHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCByZWdFeHAgPSBuZXcgUmVnRXhwKGBeJHtkYXRhVXNlcn1bXFx30LAt0Y/RkSBdezAsfWAsICdpJyk7XHJcblxyXG4gICAgICB0aGlzLnBhcnNKU09OKHRoaXMuZGF0YUNpdHksIHJlZ0V4cCk7Ly9cclxuXHJcbiAgICAgIC8vICQuZ2V0SlNPTih0aGlzLnVybEpTT04sIChkYXRhKSA9PiB0aGlzLnBhcnNKU09OKGRhdGEsIHJlZ0V4cCkpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIC8hKipcclxuICAgKiDQn9Cw0YDRgdC40YIg0LzQsNGB0YHQuNCyINGBINC+0LHRitC10LrRgtCw0LzQuCDQs9C+0YDQvtC00L7QsiDQv9GA0L7QstC10YDRj9GPINC60LDQttC00L7QtSDQvdCw0LfQstCw0L3QuNC1INCz0L7RgNC+0LTQsCDQvdCwINGB0L7QvtGC0LLQtdGB0YLQstC40LUg0YDQtdCz0YPQu9GP0YDQvdC+0LzRgyDQstGL0YDQsNC20LXQvdC40Y5cclxuICAgKiDQuCDQuNC3INGC0LXRhSDQutC+0YLQvtGA0YvQtSDQv9GA0L7Qt9C+0LTRj9GCINC/0YDQvtCy0LXRgNC60YMg0L/RgCDRgNC10LPRg9C70Y/RgNC60LUg0YHQutC70LDQtNGL0LLQsNC10YIg0LIg0L7RgtC00LXQu9GM0L3Ri9C5INC80LDRgdGB0LjQsi5cclxuICAgKiDQl9Cw0L/Rg9GB0LrQsNC10YIg0LzQtdGC0L7QtCDQstGL0LLQvtC00LAg0Y3RgtC40YUg0LPQvtGA0L7QtNC+0LIg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GOLlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0W119IGRhdGEg0LzQsNGB0YHQuNCyINC+0LHRitC10LrRgtC+0LIg0LPQvtGA0L7QtNC+0LIg0LTQu9GPINC/0YDQvtCy0LXRgNC60Lgg0YDQtdCz0YPQu9GP0YDQvdGL0Lwg0LLRi9GA0LDQttC10L3QuNC10LwuXHJcbiAgICogQHBhcmFtIHtPYmplY3R9IHJlZ0V4cCDRgNC10LPRg9C70Y/RgNC90L7QtSDQstGL0YDQsNC20LXQvdC40LUuXHJcbiAgICohL1xyXG4gIHBhcnNKU09OKGRhdGEsIHJlZ0V4cCkge1xyXG4gICAgbGV0IGFyclNlYXJjaE9iamVjdENpdHkgPSBbXTtcclxuICAgIGZvciAoY29uc3Qgb2JqIG9mIGRhdGEpIHtcclxuICAgICAgaWYgKHJlZ0V4cC50ZXN0KG9iai5uYW1lKSkge1xyXG4gICAgICAgIGNvbnN0IG9iak91dCA9IHt9O1xyXG4gICAgICAgIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gb2JqKSB7XHJcbiAgICAgICAgICBvYmpPdXRbcHJvcE5hbWVdID0gb2JqW3Byb3BOYW1lXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFyclNlYXJjaE9iamVjdENpdHkubGVuZ3RoID4gMTApIGJyZWFrO1xyXG4gICAgICAgIGFyclNlYXJjaE9iamVjdENpdHkucHVzaChvYmpPdXQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoIWFyclNlYXJjaE9iamVjdENpdHkubGVuZ3RoID4gMCkge1xyXG4gICAgICB0aGlzLm91dE9wdGlvbkNpdGllcyhhcnJTZWFyY2hPYmplY3RDaXR5LCB0cnVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMub3V0T3B0aW9uQ2l0aWVzKGFyclNlYXJjaE9iamVjdENpdHkpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG5cclxuICAvISoqXHJcbiAgICog0JLRi9Cy0L7QtNC40YIg0L/RgNC10LTQu9Cw0LPQsNC10LzRi9C5INGB0L/QuNGB0L7QuiDQs9C+0YDQvtC00L7QsiDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y4g0LjQu9C4INGB0LrRgNGL0LLQsNC10YIg0Y3RgtC+0YIg0YHQv9C40YHQvtC6LlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0W119IGFyck9iakNpdGllcyDQvNCw0YHRgdC40LIg0L7QsdGK0LXQutGC0L7QsiDQs9C+0YDQvtC00L7QsiDQtNC70Y8g0LLRi9Cy0L7QtNCwINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRji5cclxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlbW92ZSDQtdGB0LvQuCB0cnVlINGC0L4g0YPQtNCw0LvRj9C10Lwg0YHQv9C40YHQvtC6INCz0L7RgNC+0LTQviwgZmFsc2Ug0LLRi9Cy0L7QtNC40LwuXHJcbiAgICohL1xyXG4gIG91dE9wdGlvbkNpdGllcyhhcnJPYmpDaXRpZXMsIHJlbW92ZSA9IGZhbHNlKSB7XHJcbiAgICBpZiAocmVtb3ZlKSB7XHJcbiAgICAgICQoYCMke3RoaXMuaWRFbGVtTGlzdFNlYXJjaENpdHl9YCkucmVtb3ZlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCAkdWxPdXQgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJykpLmF0dHIoJ2lkJywgdGhpcy5pZEVsZW1MaXN0U2VhcmNoQ2l0eSlcclxuICAgICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5jbGlja0xpSGFuZGxlcihldmVudCkpO1xyXG4gICAgICBmb3IgKGNvbnN0IG9iaiBvZiBhcnJPYmpDaXRpZXMpIHtcclxuICAgICAgICAkdWxPdXQuYXBwZW5kKCQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKSkuYXR0cigndmFsdWUnLCBvYmouaWQpLnRleHQob2JqLm5hbWUpKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoJChgIyR7dGhpcy5pZEVsZW1MaXN0U2VhcmNoQ2l0eX1gKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgJChgIyR7dGhpcy5pZEVsZW1MaXN0U2VhcmNoQ2l0eX1gKS5yZXBsYWNlV2l0aCgkdWxPdXQpO1xyXG4gICAgICB9XHJcbiAgICAgICQoYCMke3RoaXMuaWRJbnB1dENpdHl9YCkuYWZ0ZXIoJHVsT3V0KTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBjbGlja0xpSGFuZGxlcihldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LnRhcmdldC50YWdOYW1lID09PSAnTEknKSB7XHJcbiAgICAgICQoYCMke3RoaXMuaWRJbnB1dENpdHl9YCkudmFsKGV2ZW50LnRhcmdldC5pbm5lclRleHQpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5vdXRPcHRpb25DaXRpZXMobnVsbCwgdHJ1ZSk7XHJcbiAgfSxcclxuXHJcbiAgLyEqKlxyXG4gICAqINCf0YDQvtCy0L7QtNC40YIg0LLQsNC70LjQtNCw0YbQuNGOINC/0L7Qu9GPIGlucHV0LlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW0g0Y3Qu9C10LzQtdC90YIgaW5wdXQuXHJcbiAgICogQHJldHVybiB7Ym9vbGVhbn0g0LLQvtC30LLRgNCw0YnQsNC10YIgdHJ1ZSDQtdGB0LvQuCDRjdC70LXQvNC10L3RgiDQv9GA0L7RhdC+0LTQuNGCINCy0LDQu9C40LTQsNGG0LjRjiDQuNC90LDRh9C1IGZhbHNlLlxyXG4gICAqIS9cclxuICB2YWxpZGF0ZVNlbGVjdChlbGVtKSB7XHJcbiAgICByZXR1cm4gdGhpcy5yZWdFeHBDaXR5LnRlc3QoZWxlbS52YWx1ZS50cmltKCkpO1xyXG4gIH0sXHJcbn07XHJcbiovXHJcblxyXG5cclxuLyoqXHJcbiAqINCS0LDQu9C40LTQsNGG0LjRjyDRhNC+0YDQvNGLLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gaWRJbnB1dE5hbWUgaWQgSFRNTCDRjdC70LXQvNC10L3RgtCwIGlucHV0INC00LvRjyDQstCy0L7QtNCwINC40LzQtdC90LguXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZElucHV0UGhvbmUgaWQgSFRNTCDRjdC70LXQvNC10L3RgtCwIGlucHV0INC00LvRjyDQstCy0L7QtNCwINGC0LXQu9C10YTQvtC90LAuXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBpZElucHV0RW1haWwgaWQgSFRNTCDRjdC70LXQvNC10L3RgtCwIGlucHV0INC00LvRjyDQstCy0L7QtNCwIGVtYWlsLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gaWRJbnB1dE1lc3NhZ2UgaWQgSFRNTCDRjdC70LXQvNC10L3RgtCwIGlucHV0INC00LvRjyDQstCy0L7QtNCwINGB0L7QvtCx0YnQtdC90LjRjy5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IGlkQnRuU3VibWl0IGlkIEhUTUwg0Y3Qu9C10LzQtdC90YLQsCBidXR0b24g0LTQu9GPINC+0YLQv9GA0LDQstC60Lgg0YTQvtGA0LzRiy5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IGNsYXNzRWxlbU91dEVyciBjbGFzcyBIVE1MINGN0LvQtdC80LXQvdGC0LAgZGl2INC00LvRjyDQstGL0LLQvtC00LAg0YHQvtC+0LHRidC10L3QuNGPINC+0LEg0L7RiNC40LHQutC1INCy0LDQu9C40LTQsNGG0LjQuCDQv9C+0LvRjy5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IGNsYXNzTm9WYWxpZGF0ZUlucHV0IGNsYXNzIEhUTUwg0Y3Qu9C10LzQtdC90YLQsCBpbnB1dCDQuNC70LggdGV4dGFyZWFcclxuICog0LTQu9GPINCy0YvQtNC10LvQtdC90LjRjyDRgNCw0LzQutC+0Lkg0LIg0YHQu9GD0YfQsNC1INC+0YjQuNCx0LrQuCDQstCw0LvQuNC00LDRhtC40Lgg0L/QvtC70Y8uXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjbGFzc1ZhbGlkYXRlSW5wdXQgY2xhc3MgSFRNTCDRjdC70LXQvNC10L3RgtCwIGlucHV0INC40LvQuCB0ZXh0YXJlYVxyXG4gKiDQtNC70Y8g0LLRi9C00LXQu9C10L3QuNGPINGA0LDQvNC60L7QuSDQsiDRgdC70YPRh9Cw0LUg0YPQtNCw0YfQvdC+0Lkg0LLQsNC70LjQtNCw0YbQuNC4INC/0L7Qu9GPLlxyXG4gKiBAcHJvcGVydHkge09iamVjdH0gZXJyb3JNZXNzYWdlINC+0LHQtdC60YIg0YEg0YHQvtC+0LHRidC10L3QuNGP0LzQuCDQvtCxINC+0YjQuNCx0LrQsNGFINCy0LDQu9C40LTQsNGG0LjQuC5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IGVycm9yTWVzc2FnZS5uYW1lINGB0L7QtNC10YDQttC40YIg0YHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1INCy0LDQu9C40LTQsNGG0LjQuCDQtNC70Y8g0L/QvtC70Y8gXCLQuNC80Y9cIi5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IGVycm9yTWVzc2FnZS5waG9uZSDRgdC+0LTQtdGA0LbQuNGCINGB0L7QvtCx0YnQtdC90LjQtSDQvtCxINC+0YjQuNCx0LrQtSDQstCw0LvQuNC00LDRhtC40Lgg0LTQu9GPINC/0L7Qu9GPIFwi0YLQtdC70LXRhNC+0L1cIi5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IGVycm9yTWVzc2FnZS5tZXNzYWdlINGB0L7QtNC10YDQttC40YIg0YHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1INCy0LDQu9C40LTQsNGG0LjQuCDQtNC70Y8g0L/QvtC70Y8gXCLRgdC+0L7QsdGJ0LXQvdC40LVcIi5cclxuICogQHByb3BlcnR5IHtSZWdFeHB9IHJlZ0V4cE5hbWUg0YDQtdCz0YPQu9GP0YDQvdC+0LUg0LLRi9GA0LDQttC10L3QuNC1INC00LvRjyDQstCw0LvQuNC00LDRhtC40Lgg0L/QvtC70Y8gXCLQuNC80Y9cIi5cclxuICogQHByb3BlcnR5IHtSZWdFeHB9IHJlZ0V4cFBob25lINGA0LXQs9GD0LvRj9GA0L3QvtC1INCy0YvRgNCw0LbQtdC90LjQtSDQtNC70Y8g0LLQsNC70LjQtNCw0YbQuNC4INC/0L7Qu9GPIFwi0YLQtdC70LXRhNC+0L1cIi5cclxuICogQHByb3BlcnR5IHtSZWdFeHB9IHJlZ0V4cEVtYWlsINGA0LXQs9GD0LvRj9GA0L3QvtC1INCy0YvRgNCw0LbQtdC90LjQtSDQtNC70Y8g0LLQsNC70LjQtNCw0YbQuNC4INC/0L7Qu9GPIFwiZW1haWxcIi5cclxuICogQHByb3BlcnR5IHtSZWdFeHB9IHJlZ0V4cE1lc3NhZ2Ug0YDQtdCz0YPQu9GP0YDQvdC+0LUg0LLRi9GA0LDQttC10L3QuNC1INC00LvRjyDQstCw0LvQuNC00LDRhtC40Lgg0L/QvtC70Y8gXCLRgdC+0L7QsdGJ0LXQvdC40LVcIi5cclxuICovXHJcbmNvbnN0IHZhbGlkYXRlRm9ybSA9IHtcclxuICAvLyBiaXJ0aGRheUlucHV0LFxyXG4gIGlkSW5wdXROYW1lOiAnbmFtZVVzZXInLFxyXG4gIGlkSW5wdXRQaG9uZTogJ3Bob25lJyxcclxuICBpZElucHV0RW1haWw6ICdlbWFpbCcsXHJcbiAgaWRJbnB1dE1lc3NhZ2U6ICdjb21tZW50VXNlcicsXHJcbiAgaWRCdG5TdWJtaXQ6ICdidG5BZGRDb21tZW50JyxcclxuICBjbGFzc0VsZW1PdXRFcnI6ICdlcnJvci1tZXNzYWdlJyxcclxuICBjbGFzc05vVmFsaWRhdGVJbnB1dDogJ2Vycm9yLWlucHV0JyxcclxuICBjbGFzc1ZhbGlkYXRlSW5wdXQ6ICdzdWNjZXNzLWlucHV0JyxcclxuICBlcnJvck1lc3NhZ2U6IHtcclxuICAgIG5hbWVVc2VyOiAn0JjQvNGPINC00L7Qu9C20L3QviDRgdC+0LTQtdGA0LbQsNGC0Ywg0YLQvtC70YzQutC+INCx0YPQutCy0YsnLFxyXG4gICAgcGhvbmU6ICfQotC10LvQtdGE0L7QvSDQtNC+0LvQttC10L0g0LHRi9GC0Ywg0LIg0YTQvtGA0LzQsNGC0LUgXCIrNygwMDApMDAwLTAwMDBcIicsXHJcbiAgICBlbWFpbDogJ9Cd0LUg0LrQvtGA0YDQtdC60YLQvdGL0LkgZW1haWwnLFxyXG4gICAgY29tbWVudFVzZXI6ICfQktGLINC30LDQsdGL0LvQuCDQvdCw0L/QuNGB0LDRgtGMINC60L7QvNC80LXQvdGC0LDRgNC40LknLFxyXG4gICAgLypcclxuICAgICAgICBjaXR5OiBpbnB1dENpdHkuZXJyb3JNZXNzYWdlLFxyXG4gICAgICAgIGJpcnRoZGF5OiBiaXJ0aGRheUlucHV0LmVycm9yTWVzc2FnZSxcclxuICAgICovXHJcbiAgfSxcclxuICByZWdFeHBOYW1lOiAvXlthLXrQsC3Rj9GRXXsyLH0kL2ksXHJcbiAgcmVnRXhwUGhvbmU6IC9eXFwrXFxkXFwoXFxkezN9XFwpXFxkezN9LVxcZHs0fSQvLFxyXG4gIHJlZ0V4cEVtYWlsOiAvXlthLXowLTktXy5dK0BbYS16XSsuW2Etel17Miw0fSQvaSxcclxuICByZWdFeHBNZXNzYWdlOiAvW1xcd9CwLdGP0ZFdezMsfS8sXHJcblxyXG5cclxuICAvKipcclxuICAgKiDQl9Cw0L/Rg9GB0Log0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC80YsuXHJcbiAgICog0J/RgNC+0YXQvtC00LjRgtGB0Y8g0L/QviDQstGB0LXQvCDQvdGD0LbQvdGL0Lwg0Y3Qu9C10LzQtdC90YLQsNC8INC4INC30LDQv9GD0YHQutCw0LXRgiDQtNC70Y8g0LrQsNC20LTQvtCz0L4g0LLQsNC70LjQtNCw0YbQuNGOLCDQtdGB0LvQuCDRhdC+0YLRjCDQvtC00L3QsCDQtdGB0YLRjCDQvtGI0LjQsdC60LAg0LLQsNC70LjQtNCw0YbQuNC4INGC0L4g0LLQvtC30LLRgNCw0YnQsNC10LwgZmFsc2UsINC40L3QsNGH0LUgdHJ1ZS5cclxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZm9ybSBqUXVlcnkg0Y3Qu9C10LzQtdC90YIg0LLQsNC70LjQtNC40YDRg9C10LzQvtC5INGE0L7RgNC80YsuXHJcbiAgICovXHJcbiAgc3RhcnRWYWxpZGF0ZShmb3JtKSB7XHJcbiAgICBsZXQgYXJyID0gJChmb3JtKS5maW5kKCdpbnB1dCwgdGV4dGFyZWEnKTtcclxuICAgIGxldCB2YWxpZCA9IHRydWU7XHJcbiAgICBmb3IgKGxldCBlbGVtIG9mIGFycikge1xyXG4gICAgICBpZiAoZWxlbS5pZCA9PT0gdGhpcy5pZEJ0blN1Ym1pdCkgY29udGludWU7XHJcbiAgICAgIGxldCB2YWxpZGF0ZVJlc3VsdCA9IHRoaXMudmFsaWRhdGVJbnB1dChlbGVtKTtcclxuICAgICAgaWYgKCF2YWxpZGF0ZVJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMub3V0TWVzc2FnZUZhaWxWYWxpZGF0ZShlbGVtKTtcclxuICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMub3V0TWVzc2FnZUZhaWxWYWxpZGF0ZShlbGVtLCB0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHZhbGlkO1xyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqINCS0LDQu9C40LTQsNGG0LjRjyDQutCw0LbQtNC+0LPQviDQv9C+0LvRjyDRgdCy0L7QuNC8INGA0LXQs9GD0LvRj9GA0L3Ri9C8INCy0YvRgNCw0LbQtdC90LjQtdC8LlxyXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW0g0Y3Qu9C10LzQtdC90YIsINC60L7RgtC+0YDRi9C5INGC0YDQtdCx0YPQtdGC0YHRjyDQv9GA0L7QstCw0LvQuNC00LjRgNC+0LLQsNGC0YwuXHJcbiAgICogQHJldHVybiB7Ym9vbGVhbn0g0LLQvtC30LLRgNCw0YnQsNC10YIgdHJ1ZSDQtdGB0LvQuCDRjdC70LXQvNC10L3RgiDQv9GA0L7RhdC+0LTQuNGCINCy0LDQu9C40LTQsNGG0LjRjiDQuNC90LDRh9C1IGZhbHNlLlxyXG4gICAqL1xyXG4gIHZhbGlkYXRlSW5wdXQoZWxlbSkge1xyXG4gICAgc3dpdGNoIChlbGVtLmlkKSB7XHJcbiAgICAgIGNhc2UgdGhpcy5pZElucHV0TmFtZTpcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWdFeHBOYW1lLnRlc3QoZWxlbS52YWx1ZS50cmltKCkpO1xyXG5cclxuICAgICAgY2FzZSB0aGlzLmlkSW5wdXRQaG9uZTpcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWdFeHBQaG9uZS50ZXN0KGVsZW0udmFsdWUudHJpbSgpKTtcclxuXHJcbiAgICAgIGNhc2UgdGhpcy5pZElucHV0RW1haWw6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnRXhwRW1haWwudGVzdChlbGVtLnZhbHVlLnRyaW0oKSk7XHJcblxyXG4gICAgICBjYXNlIHRoaXMuaWRJbnB1dE1lc3NhZ2U6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnRXhwTWVzc2FnZS50ZXN0KGVsZW0udmFsdWUudHJpbSgpKTtcclxuXHJcbiAgICAgIC8qXHJcbiAgICAgICAgICAgIGNhc2UgaW5wdXRDaXR5LmlkSW5wdXRDaXR5OlxyXG4gICAgICAgICAgICAgIHJldHVybiBpbnB1dENpdHkudmFsaWRhdGVTZWxlY3QoZWxlbSk7XHJcblxyXG4gICAgICAgICAgICBjYXNlIHRoaXMuYmlydGhkYXlJbnB1dC5pZElucHV0RGF0ZXBpY2tlcjpcclxuICAgICAgICAgICAgICByZXR1cm4gdGhpcy5iaXJ0aGRheUlucHV0LnZhbGlkYXRlKGVsZW0pO1xyXG4gICAgICAqL1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqINCe0YDQs9Cw0L3QuNC30YPQtdGCINCy0YvQstC+0LQg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GOKNCy0LDQu9C40LTQsNGG0LjRjyDQv9GA0L7RiNC70LAg0LjQu9C4INC90LXRgilcclxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtINCyINC60L7RgtC+0YDQvtC8INC/0YDQvtGI0LvQsCDQstCw0LvQuNC00LDRhtC40Y8g0Lgg0LrQvtGC0L7RgNGL0Lkg0L3QsNC00L4g0L/QvtC60LDQt9Cw0YLRjCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y4sINC10YHQu9C4INCy0LDQu9C40LTQsNGG0LjRjyDRg9C00LDRh9C90LAsINGC0L4g0LfQtdC70LXQvdGL0LkgYm9yZGVyINGDINGN0LvQtdC80LXQvdGC0LAsINC10YHQu9C4INC90LUg0YPQtNCw0YfQvdCwLCDRgtC+INC60YDQsNGB0L3Ri9C5IGJvcmRlciDQuCDRgdC+0L7QsdGJ0LXQvdC40LUg0L7QsSDQvtGI0LjQsdC60LUuXHJcbiAgICogQHBhcmFtIHtib29sZWFufSB2YWxpZGF0ZSDQtdGB0LvQuCB0cnVlINGC0L4g0LTQtdC50YHRgtCy0YPQtdC8INC/0L4g0LDQu9Cz0L7RgNC40YLQvNGDINGD0YHQv9C10YUsIGZhbHNlINC00LXQudGB0YLQstGD0LXQvCDQv9C+INCw0LvQs9C+0YDQuNGC0LzRgyDQvtGI0LjQsdC60LAuXHJcbiAgICovXHJcbiAgb3V0TWVzc2FnZUZhaWxWYWxpZGF0ZShlbGVtLCB2YWxpZGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBsZXQgZWxlbUVycm9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGVycm9yLSR7ZWxlbS5pZH1gKTtcclxuICAgIGlmICghdmFsaWRhdGUpIHtcclxuICAgICAgaWYgKCFlbGVtRXJyb3IpIHtcclxuICAgICAgICBlbGVtRXJyb3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBlbGVtRXJyb3IuaWQgPSBgZXJyb3ItJHtlbGVtLmlkfWA7XHJcbiAgICAgICAgZWxlbUVycm9yLmNsYXNzTGlzdC5hZGQodGhpcy5jbGFzc0VsZW1PdXRFcnIpO1xyXG4gICAgICAgIGVsZW0ucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoZWxlbUVycm9yLCBlbGVtLm5leHRFbGVtZW50U2libGluZyk7XHJcbiAgICAgIH1cclxuICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY2xhc3NWYWxpZGF0ZUlucHV0KTtcclxuICAgICAgZWxlbS5jbGFzc0xpc3QuYWRkKHRoaXMuY2xhc3NOb1ZhbGlkYXRlSW5wdXQpO1xyXG4gICAgICBlbGVtRXJyb3IuaW5uZXJUZXh0ID0gJy0gJyArIHRoaXMuZXJyb3JNZXNzYWdlW2VsZW0uaWRdO1xyXG4gICAgICBlbGVtLnZhbHVlID0gJyc7XHJcblxyXG4gICAgICAkKGVsZW0pLmVmZmVjdCgnYm91bmNlJyk7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKGVsZW1FcnJvcikge1xyXG4gICAgICAgIGVsZW1FcnJvci5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1FcnJvcik7XHJcbiAgICAgIH1cclxuICAgICAgZWxlbS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuY2xhc3NOb1ZhbGlkYXRlSW5wdXQpO1xyXG4gICAgICBlbGVtLmNsYXNzTGlzdC5hZGQodGhpcy5jbGFzc1ZhbGlkYXRlSW5wdXQpO1xyXG4gICAgICBlbGVtLnZhbHVlID0gZWxlbS52YWx1ZS50cmltKCk7XHJcbiAgICB9XHJcbiAgfSxcclxufTsiXX0=
